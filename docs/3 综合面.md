# ç›®å½•
* æ¡†æ¶ (ä¸»React, å‰¯Vue)
* è®¾è®¡æ¨¡å¼ (è§‚å¯Ÿè€…æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ç­‰)
* å·¥ç¨‹åŒ– (Webpack, Git)
* æ€§èƒ½ä¼˜åŒ–
* æœåŠ¡ç«¯ (Node.js)

============================================== fè®¾è®¡æ¨¡å¼ ==============================================
# å¹³æ—¶å·¥ä½œä¸­æœ‰ç”¨åˆ°å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ
TODO: 
1.å•ä¾‹æ¨¡å¼ ç»§å“¥å†™çš„åŸºç¡€åº“ï¼Ÿ reduxçš„store
2.è§‚å¯Ÿè€…æ¨¡å¼ reduxçš„subscribeå’Œdispatch (å¦‚æœé¢è¯•å®˜è¦æ±‚ä¸¾å‡ºæ›´å¤šä¾‹å­ï¼Œå†è®² Vueçš„Watcherè®¢é˜…å’ŒDataå‘å¸ƒ)

# få•ä¾‹æ¨¡å¼
å•ä¾‹æ¨¡å¼å³ä¸€ä¸ªç±»åªèƒ½æ„é€ å‡ºå”¯ä¸€çš„å®ä¾‹ï¼Œå•ä¾‹æ¨¡å¼çš„æ„ä¹‰åœ¨äºå…±äº«ã€å”¯ä¸€ã€‚
## ä¾‹å­
Redux çš„ storeã€‚ (å¦‚æœé¢è¯•å®˜è¦æ±‚ä¸¾å‡ºæ›´å¤šä¾‹å­ï¼Œå†è®² Vuexçš„store, JQçš„$, ä¸šåŠ¡åœºæ™¯çš„è´­ç‰©è½¦ğŸ›’ç­‰)
## ä»£ç 
```js
class Singleton {
  constructor(name) {
    this.name = name;
  }
  static getInstance(name) {
    if (!this.instance) {
      this.instance = new Singleton(name);
    }
    return this.instance;
  }
}
const instance1 = Singleton.getInstance('name1');
const instance2 = Singleton.getInstance('name2');
console.log(instance1 === instance2);  // trueï¼Œåªæœ‰ä¸€ä¸ªå®ä¾‹
console.log(instance1.name);  // name1
console.log(instance2.name);  // ä¾ç„¶æ˜¯ name1
```

# å·¥å‚æ¨¡å¼
å·¥å‚æ¨¡å¼å³å¯¹åˆ›å»ºå¯¹è±¡é€»è¾‘çš„å°è£…ï¼Œæˆ–è€…å¯ä»¥ç®€å•ç†è§£ä¸ºå¯¹newçš„å°è£…ï¼Œè¿™ç§å°è£…å°±åƒåˆ›å»ºå¯¹è±¡çš„å·¥å‚ï¼Œæ•…åå·¥å‚æ¨¡å¼ã€‚
## ä¾‹å­
å·¥å‚æ¨¡å¼å¸¸è§äºå¤§å‹é¡¹ç›®ï¼Œæ¯”å¦‚JQçš„$å¯¹è±¡ï¼Œæˆ‘ä»¬åˆ›å»ºé€‰æ‹©å™¨å¯¹è±¡æ—¶ä¹‹æ‰€ä»¥æ²¡æœ‰new selectorå°±æ˜¯å› ä¸º$()å·²ç»æ˜¯ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œå…¶ä»–ä¾‹å­ä¾‹å¦‚React.createElement()ã€Vue.component()éƒ½æ˜¯å·¥å‚æ¨¡å¼çš„å®ç°ã€‚
## ä»£ç 
```js
class User {
  constructor(name, auth) {
    this.name = name;
    this.auth = auth;
  }
}
class UserFactory {
  static createUser(name, auth) {
    // å·¥å‚å†…éƒ¨å°è£…äº†åˆ›å»ºå¯¹è±¡çš„é€»è¾‘ã€‚
    // ä½¿ç”¨è€…åœ¨å¤–éƒ¨åˆ›å»ºå¯¹è±¡æ—¶,ä¸éœ€è¦çŸ¥é“å„ä¸ªæƒé™å¯¹åº”å“ªä¸ªå­—æ®µ, ä¸éœ€è¦çŸ¥é“èµ‹æƒçš„é€»è¾‘ï¼Œåªéœ€è¦çŸ¥é“åˆ›å»ºäº†ä¸€ä¸ªç®¡ç†å‘˜å’Œä¸€ä¸ªæ™®é€šç”¨æˆ·ã€‚
    if (auth === 'admin') {
      return new User(name, 1);
    }
    if (auth === 'user') {
      return new User(name, 2);
    }
  }
}
const admin = UserFactory.createUser('boss', 'admin');
const user = UserFactory.createUser('mike', 'user');
```

# è§‚å¯Ÿè€…æ¨¡å¼
è§‚å¯Ÿè€…ç›‘å¬è¢«è§‚å¯Ÿè€…çš„å˜åŒ–ï¼Œè¢«è§‚å¯Ÿè€…å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…ã€‚
## ä¾‹å­
Reduxçš„subscribeå’Œdispatchã€‚
## ä»£ç 
```js
// è§‚å¯Ÿè€…
class Observer {
  constructor(fn) {
    this.update = fn;
  }
}
// è¢«è§‚å¯Ÿè€…
class Subject {
  constructor() {
    this.observers = [];
  }
  register(ob) {
    this.observers.push(ob);
  }
  notify() {
    this.observers.forEach((ob) => {
      ob.update();
    })
  }
}
const ob1 = new Observer(() => console.log('ob1 update!'));
const ob2 = new Observer(() => console.log('ob2 update!'));
const ob3 = new Observer(() => console.log('ob3 update!'));
const subject = new Subject();
subject.register(ob1);
subject.register(ob2);
subject.register(ob3);
subject.notify();
```

# fè£…é¥°å™¨æ¨¡å¼
è£…é¥°å™¨æ¨¡å¼ï¼Œå¯ä»¥ç†è§£ä¸ºå¯¹ç±»çš„ä¸€ä¸ªåŒ…è£…ï¼ŒåŠ¨æ€åœ°æ‹“å±•ç±»çš„åŠŸèƒ½ï¼ŒES7çš„è£…é¥°å™¨è¯­æ³•ä»¥åŠReactä¸­çš„é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰éƒ½æ˜¯è¿™ä¸€æ¨¡å¼çš„å®ç°ã€‚
## ä»£ç 
```js
// ES7çš„è£…é¥°å™¨
function Info(target) {
  target.prototype.name = 'mike';
}

@Info
class Man {}

const man = new Man();
console.log(man.name);  // info
```

# fé€‚é…å™¨æ¨¡å¼
é€‚é…å™¨æ¨¡å¼ï¼Œå°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿æ¥å£ä¸å…¼å®¹çš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚æˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­å°±å¸¸å¸¸æœ‰ä½¿ç”¨é€‚é…å™¨çš„åœºæ™¯ï¼Œä¾‹å¦‚å‡ºå¢ƒæ—…æ¸¸æ’å¤´æ’åº§ä¸åŒ¹é…ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨è½¬æ¢æ’å¤´ï¼Œä¹Ÿå°±æ˜¯é€‚é…å™¨æ¥å¸®æˆ‘ä»¬è§£å†³é—®é¢˜ã€‚
## ä»£ç 
```js
class Adaptee {
  test() {
      return 'æ—§æ¥å£';
  }
}
class Target {
  constructor() {
      this.adaptee = new Adaptee()
  }
  test() {
      const info = this.adaptee.test()
      return `é€‚é…${info}`;
  }
}
const target = new Target()
console.log(target.test());
```

# fä»£ç†æ¨¡å¼
ä»£ç†æ¨¡å¼ï¼Œä¸ºä¸€ä¸ªå¯¹è±¡æ‰¾ä¸€ä¸ªæ›¿ä»£å¯¹è±¡ï¼Œä»¥ä¾¿å¯¹åŸå¯¹è±¡è¿›è¡Œè®¿é—®ã€‚å³åœ¨è®¿é—®è€…ä¸ç›®æ ‡å¯¹è±¡ä¹‹é—´åŠ ä¸€å±‚ä»£ç†ï¼Œé€šè¿‡ä»£ç†åšæˆæƒå’Œæ§åˆ¶ã€‚
## ä¾‹å­
æœ€å¸¸è§çš„ä¾‹å­æ˜¯ç»çºªäººä»£ç†æ˜æ˜Ÿä¸šåŠ¡ï¼Œå‡è®¾ä½ ä½œä¸ºä¸€ä¸ªæŠ•èµ„è€…ï¼Œæƒ³è”ç³»æ˜æ˜Ÿæ‰“å¹¿å‘Šï¼Œé‚£ä¹ˆä½ å°±éœ€è¦å…ˆç»è¿‡ä»£ç†ç»çºªäººï¼Œç»çºªäººå¯¹ä½ çš„èµ„è´¨è¿›è¡Œè€ƒå¯Ÿï¼Œå¹¶é€šçŸ¥ä½ æ˜æ˜Ÿæ’æœŸï¼Œæ›¿æ˜æ˜Ÿæœ¬äººè¿‡æ»¤ä¸å¿…è¦çš„ä¿¡æ¯ã€‚äº‹ä»¶ä»£ç†ã€JQueryçš„$.proxyã€ES6çš„proxyéƒ½æ˜¯è¿™ä¸€æ¨¡å¼çš„å®ç°ã€‚
## ä»£ç 
```js
const idol = {
  name: 'mike',
  phone: 10086,
  price: 1000000
}
const agent = new Proxy(idol, {
  get: function(target) {
    //æ‹¦æˆªæ˜æ˜Ÿç”µè¯çš„è¯·æ±‚,åªæä¾›ç»çºªäººç”µè¯
    return 'ç»çºªäººç”µè¯:10010'
  },
  set: function(target, key, value) {
    if(key === 'price' ) {
      //ç»çºªäººè¿‡æ»¤èµ„è´¨
      if(value < target.price) throw new Error('æŠ¥ä»·è¿‡ä½')
      target.price = value
    }
  }
})
agent.phone        //ç»çºªäººç”µè¯:10010
agent.price = 100  //Uncaught Error: æŠ¥ä»·è¿‡ä½
```


============================================== få·¥ç¨‹åŒ– ================================================
# fGit
Gitæ˜¯ä¸€ä¸ªå…è´¹çš„ã€å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ—¨åœ¨ä»¥å¿«é€Ÿé«˜æ•ˆçš„æ–¹å¼å¤„ç†ä»å°å‹åˆ°å¤§å‹çš„æ‰€æœ‰é¡¹ç›®ã€‚
Gitæ˜“äºå­¦ä¹ ã€å ç”¨ç©ºé—´å°ã€æ€§èƒ½æå¿«ã€‚å®ƒå…·æœ‰æ–¹ä¾¿çš„å·¥ä½œåŒºã€æš‚å­˜åŒºã€æœ¬åœ°åº“å’Œå¤šä¸ªå·¥ä½œæµåˆ†æ”¯ç­‰ç‰¹æ€§ã€‚

## æ¶æ„
è¿œç¨‹åº“
â¬†ï¸git push(æ¨é€ç»™è¿œç¨‹), â¬‡ï¸git pull(æ‹‰å–æ›´æ–°), â¬‡ï¸git clone(åˆå§‹åŒ–åˆ°æœ¬åœ°), â¬‡ï¸git remote add <è¿œç¨‹åˆ«å>ï¼ˆå¦‚ originï¼‰ <è¿œç¨‹é“¾æ¥>(æœ¬åœ°å·²ç»æœ‰é¡¹ç›®ï¼Œæ·»åŠ ä¸€ä¸ªè¿œç¨‹åº“)
æœ¬åœ°åº“
â¬†ï¸git commit(æäº¤ï¼Œç”Ÿæˆä¸€ä¸ªå†å²ç‰ˆæœ¬), â¬‡ï¸git branch <åˆ†æ”¯å>(å¢åŠ åˆ†æ”¯), â¬‡ï¸git checkout (åˆ‡æ¢åˆ†æ”¯), â¬‡ï¸git log/git reflog(æŸ¥çœ‹æäº¤æ—¥å¿—)
æš‚å­˜åŒº
â¬†ï¸git add(æ·»åŠ åˆ°æš‚å­˜åŒº), â¬‡ï¸git restore --stage <file>(å–æ¶ˆæ·»åŠ )
å·¥ä½œåŒº   

## æœ¬åœ°åº“ç»“æ„
-------- commit1 ----------- commit2 -------- commit3  ---------------- commit 4 -----------------------   åˆ†æ”¯ä¸€
            |                                                                      | åˆå¹¶ç»™åˆ†æ”¯ä¸€
            -------- commit1 --------------------------------   åˆ†æ”¯äºŒ              |
                              |                                                    | åˆ†æ”¯ä¸‰å¯ä»¥ç»§ç»­èµ°ï¼Œæ— å½±å“
                              ------- commit 1 ------------------------------------|-------- åˆ†æ”¯ä¸‰ 

### åˆ†æ”¯
å¤šä¸ªåˆ†æ”¯æ˜¯æœ¬åœ°åº“ä¸­çš„å¤šä¸ªå·¥ä½œæµï¼Œæ¯ä¸ªåˆ†æ”¯ç‹¬ç«‹ç®¡ç†è‡ªå·±çš„æäº¤å†å²ã€‚

å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ï¼Œæ˜¯ç”± HEAD å†³å®šçš„ã€‚
master,hot-fix è¿™ä¸¤ä¸ªåˆ†æ”¯å…¶å®æ˜¯ä¸¤ä¸ªæŒ‡é’ˆï¼ŒHEAD æŒ‡å‘è°ï¼Œè°å°±æ˜¯å½“å‰åˆ†æ”¯ï¼Œåˆ‡æ¢åˆ†æ”¯çš„æœ¬è´¨å°±æ˜¯æ”¹å˜ HEAD æŒ‡å‘ã€‚

#### ä¾‹å­
ä¸¤ä¸ªåˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯æœ‰ç‹¬ç«‹çš„æäº¤å†å²:
first ---- second  ---- third --- fourth ----- fifth  [master]   
                          |
                        third --------- fourth        [hot-fix]   <= HEAD (å½“å‰åˆ†æ”¯æ˜¯ hot-fix)
 
#### ä¼˜ç‚¹
åŒæ—¶å¹¶è¡Œæ¨è¿›å¤šä¸ªåŠŸèƒ½å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
å„ä¸ªåˆ†æ”¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸€ä¸ªåˆ†æ”¯å¼€å‘å¤±è´¥ï¼Œä¸ä¼šå¯¹å…¶ä»–åˆ†æ”¯é€ æˆå½±å“ã€‚å¤±è´¥çš„åˆ†æ”¯åˆ é™¤äº†ï¼Œé‡æ–°å¼€å§‹å³å¯ã€‚

git branch <åˆ†æ”¯å>: å¢åŠ åˆ†æ”¯
git branch: æŸ¥çœ‹æœ¬åœ°åº“çš„åˆ†æ”¯ï¼Œä»¥åŠå½“å‰å¤„åœ¨å“ªä¸ªåˆ†æ”¯ä¸Š
git checkout <åˆ†æ”¯å>: åˆ‡æ¢åˆ†æ”¯  (æ”¹å˜HEADæŒ‡å‘)
git reflog: æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æäº¤å†å²

#### åˆå¹¶å†²çªçš„åˆ†æ”¯
åœ¨å½“å‰åˆ†æ”¯ä¸‹ï¼Œåˆå¹¶å…¶ä»–åˆ†æ”¯çš„ä¿®æ”¹ã€‚(æ³¨æ„åˆå¹¶åªä¼šå½±å“å½“å‰åˆ†æ”¯çš„å†…å®¹ï¼Œå¯¹å…¶ä»–åˆ†æ”¯æ¯«æ— å½±å“)

##### èƒŒæ™¯
åˆå¹¶åˆ†æ”¯æ—¶ï¼Œä¸¤ä¸ªåˆ†æ”¯åœ¨åŒä¸€ä¸ªæ–‡ä»¶çš„åŒä¸€ä¸ªä½ç½®æœ‰ä¸¤å¥—å®Œå…¨ä¸åŒçš„ä¿®æ”¹ï¼ŒGitæ— æ³•å¸®æˆ‘ä»¬ä½œå‡ºå†³å®šï¼Œè¿™æ—¶å°±æœ‰å†²çªã€‚
å†²çªå‘ç”Ÿæ—¶ï¼Œéœ€è¦äººä¸ºå†³å®šæ–°ä»£ç çš„å†…å®¹ã€‚

#### æ­¥éª¤
1. æ‰§è¡Œåˆå¹¶
git merge <å…¶ä»–åˆ†æ”¯>

```shell
Auto-merging test.md  // æ­£åœ¨è‡ªåŠ¨åˆå¹¶ test.md...
CONFLICT (content): Merge conflict in test.md   // test.md é‡Œæœ‰åˆå¹¶å†²çª
Automatic merge failed; fix conflicts and then commit the result.   // è‡ªåŠ¨åˆå¹¶å¤±è´¥
```

2. vim test.md æŸ¥çœ‹å†²çªæ–‡ä»¶
<<<HEAD
<å½“å‰åˆ†æ”¯çš„ä»£ç >
======
<è¦åˆå¹¶è¿›æ¥çš„åˆ†æ”¯çš„ä»£ç >
>>>>> hot-fix

3. æ‰‹åŠ¨ä¿®æ”¹
ä¿®æ”¹`<<<HEAD`å’Œ`======`ä¸­é—´çš„å†…å®¹ï¼Œç•™ä¸‹ä½ è¦çš„éƒ¨åˆ†ï¼Œç„¶åæŠŠåˆ†å‰²çº¿åˆ æ‰ã€‚

4. ä¿å­˜
wq, git add, git commit, å®Œæˆä»¥åï¼Œ`å…¶ä»–åˆ†æ”¯`çš„ä¿®æ”¹å°±åˆå¹¶åˆ°`æœ¬åˆ†æ”¯`äº†ã€‚


## åˆ†æ”¯å†…ç‰ˆæœ¬ç©¿æ¢­ (å›åˆ°æŸä¸€ä¸ªæäº¤å†å²)  fç‰ˆæœ¬ç©¿æ¢­
å›åˆ°æŸä¸€ä¸ªæäº¤å†å²ï¼Œä½œå‡ºä¿®æ”¹åï¼Œå†æäº¤åˆ°æœ€æ–°ä¿®æ”¹çš„åé¢ã€‚ å®ç°å›åˆ°è¿‡å»ï¼Œé€†è½¬ç°åœ¨!

first ---- second  ---- third --- fourth ----- fifth                å½“å‰åœ¨ fifth æäº¤
                                              [master]

first ---- second  ---- third --- fourth ----- fifth                å›åˆ° third æäº¤
                      [master]       

first ---- second  ---- third --- fourth ----- fifth ---- sixth     åŸºäº third ä¿®æ”¹ï¼Œæäº¤ sixth
                                                        [master]                
### å‘½ä»¤
git reset --hard [commitCode]


## git frebase vs git fmerge
git rebase:  æ‰¾åˆ°å½“å‰åˆ†æ”¯å’Œç›®æ ‡åˆ†æ”¯çš„äº¤å‰ç‚¹ï¼Œäº¤å‰ç‚¹åˆ°å½“å‰åˆ†æ”¯å°¾çš„éƒ¨åˆ†æ‹†å‡ºæ¥ï¼Œåˆåˆ°ç›®æ ‡åˆ†æ”¯çš„æœ«å°¾ï¼Œä¹Ÿå°±æ˜¯åˆæˆä¸€æ¡ commit çº¿ã€‚
git merge: æ–°å»ºä¸€ä¸ª commit ç»“ç‚¹ï¼Œä¸¤ä¸ªåˆ†æ”¯æœ«å°¾éƒ½æŒ‡å‘è¿™ä¸ªæ–°çš„ commit ç»“ç‚¹ã€‚

 

# fRedux fredux
Redux æ˜¯ JavaScript çŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†ã€‚ 

Redux å¯ä»¥ç”¨è¿™ä¸‰ä¸ªåŸºæœ¬åŸåˆ™æ¥æè¿°:
1. å•ä¸€æ•°æ®æº
æ•´ä¸ªåº”ç”¨çš„ state è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚
è¿™è®©åŒæ„åº”ç”¨å¼€å‘å˜å¾—éå¸¸å®¹æ˜“ã€‚æ¥è‡ªæœåŠ¡ç«¯çš„ state å¯ä»¥åœ¨æ— éœ€ç¼–å†™æ›´å¤šä»£ç çš„æƒ…å†µä¸‹è¢«åºåˆ—åŒ–å¹¶æ³¨å…¥åˆ°å®¢æˆ·ç«¯ä¸­ã€‚ç”±äºæ˜¯å•ä¸€çš„ state tree ï¼Œè°ƒè¯•ä¹Ÿå˜å¾—éå¸¸å®¹æ˜“ã€‚åœ¨å¼€å‘ä¸­ï¼Œä½ å¯ä»¥æŠŠåº”ç”¨çš„ state ä¿å­˜åœ¨æœ¬åœ°ï¼Œä»è€ŒåŠ å¿«å¼€å‘é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œå—ç›Šäºå•ä¸€çš„ state tree ï¼Œä»¥å‰éš¾ä»¥å®ç°çš„å¦‚â€œæ’¤é”€/é‡åšâ€è¿™ç±»åŠŸèƒ½ä¹Ÿå˜å¾—è½»è€Œæ˜“ä¸¾ã€‚

2. State æ˜¯åªè¯»çš„
å”¯ä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ actionï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚
è¿™æ ·ç¡®ä¿äº†è§†å›¾å’Œç½‘ç»œè¯·æ±‚éƒ½ä¸èƒ½ç›´æ¥ä¿®æ”¹ stateï¼Œç›¸åå®ƒä»¬åªèƒ½è¡¨è¾¾æƒ³è¦ä¿®æ”¹çš„æ„å›¾ã€‚å› ä¸ºæ‰€æœ‰çš„ä¿®æ”¹éƒ½è¢«é›†ä¸­åŒ–å¤„ç†ï¼Œä¸”ä¸¥æ ¼æŒ‰ç…§ä¸€ä¸ªæ¥ä¸€ä¸ªçš„é¡ºåºæ‰§è¡Œï¼Œå› æ­¤ä¸ç”¨æ‹…å¿ƒ race condition çš„å‡ºç°ã€‚ Action å°±æ˜¯æ™®é€šå¯¹è±¡è€Œå·²ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«æ—¥å¿—æ‰“å°ã€åºåˆ—åŒ–ã€å‚¨å­˜ã€åæœŸè°ƒè¯•æˆ–æµ‹è¯•æ—¶å›æ”¾å‡ºæ¥ã€‚

3. ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹
ä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state tree ï¼Œä½ éœ€è¦ç¼–å†™ reducersã€‚
Reducer åªæ˜¯ä¸€äº›çº¯å‡½æ•°ï¼Œå®ƒæ¥æ”¶å…ˆå‰çš„ state å’Œ actionï¼Œå¹¶è¿”å›æ–°çš„ stateã€‚åˆšå¼€å§‹ä½ å¯ä»¥åªæœ‰ä¸€ä¸ª reducerï¼Œéšç€åº”ç”¨å˜å¤§ï¼Œä½ å¯ä»¥æŠŠå®ƒæ‹†æˆå¤šä¸ªå°çš„ reducersï¼Œåˆ†åˆ«ç‹¬ç«‹åœ°æ“ä½œ state tree çš„ä¸åŒéƒ¨åˆ†ï¼Œå› ä¸º reducer åªæ˜¯å‡½æ•°ï¼Œä½ å¯ä»¥æ§åˆ¶å®ƒä»¬è¢«è°ƒç”¨çš„é¡ºåºï¼Œä¼ å…¥é™„åŠ æ•°æ®ï¼Œç”šè‡³ç¼–å†™å¯å¤ç”¨çš„ reducer æ¥å¤„ç†ä¸€äº›é€šç”¨ä»»åŠ¡ï¼Œå¦‚åˆ†é¡µå™¨ã€‚

## æ‰‹å†™æºç 
https://github.com/ronnycyy/state-manager/tree/main/redux

### fcreateStore.js
è§‚å¯Ÿè€…æ¨¡å¼: è®¢é˜…ã€å–æ¶ˆè®¢é˜…ã€å‘å¸ƒã€‚
```js
export default function createStore(reducer, initState, rewriteCreateStoreFunction) {
  if (rewriteCreateStoreFunction) {
    const newCreateStore = rewriteCreateStoreFunction(createStore);
    return newCreateStore(reducer, initState);
  }

  let state = initState;
  let listeners = [];

  function subscribe(listener) {
    // è®¢é˜…
    listeners.push(listener);
    // å–æ¶ˆè®¢é˜…
    return function unsubscribe(listener) {
      const index = listeners.indexOf(listener);
      listeners.splice(index, 1);
    }
  }

  function getState() {
    return state;
  }

  function dispatch(action) {
    // é€šçŸ¥ç”¨æˆ·å®šä¹‰çš„ reducer å¾—åˆ°æ–°çš„çŠ¶æ€
    state = reducer(state, action);
    // å‘å¸ƒ 
    // æ— è®ºå“ªä¸ªå°çŠ¶æ€å˜åŒ–ï¼Œéƒ½å°†å…¨é‡é€šçŸ¥
    for (let i = 0, len = listeners.length; i < len; i++) {
      const listener = listeners[i];
      listener();
    }
  }

  // æ‰§è¡Œæ‰€æœ‰çš„ reducerï¼Œä½¿å¾— `ä»¥reducerä¸ºkeyçš„æ¯ä¸ªstore`ï¼Œåœ¨æ€»çŠ¶æ€é‡Œåˆå§‹åŒ–ã€‚
  // ä½¿ç”¨ symbol é¿å…å’Œç”¨æˆ·çš„ action.type é‡å
  dispatch({ type: Symbol('__init_store__') });
  /**
   * å®ç°ä¸€ä¸ª Symbol?
   * 
   * function MySymbol(name) {
   *    const obj = Object.create({
   *      toString: function() {
   *         return name;
   *      }
   *    })
   *    return obj;
   * }
   */

  function replaceReducer(nextReducer) {
    reducer = nextReducer;
    dispatch({ type: Symbol('__init_store__') });
  }

  return {
    subscribe,
    getState,
    dispatch,
    replaceReducer,
  }
}
```




### fcombineReducer.js
ç»„åˆç”¨æˆ·æ‰€æœ‰çš„ reducerï¼Œæ¯ä¸ª reducer ç»´æŠ¤è‡ªå·±çš„é‚£ä»½ state (totalState[key])ï¼Œä½†æ˜¯æ¯æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨ä½“çš„æ–°çš„ state è¿”å›ã€‚
å¦‚æœç¡®å®æ²¡æœ‰å˜æ›´ï¼Œ(éå¸¸å°‘è§ï¼Œæ¯”å¦‚å‘äº†ä¸€ä¸ªæ‰€æœ‰ reducer éƒ½ä¸å—ç†çš„ action)ï¼Œæ‰ä¼šè¿”å›ä¹‹å‰çš„ state å¼•ç”¨ã€‚
```js
export default function combineReducers(reducers) {
  const reducerKeys = Object.keys(reducers);

  // æœ€ååˆå¹¶å¥½çš„ reducer
  return function combine(state = {}, action) {
    // æ‰€æœ‰çš„ action, éƒ½æ˜¯æ‰§è¡Œè¿™ä¸ª combine å‡½æ•°ï¼Œæ”¹å˜è‡ªå·±çš„ state (state[key])ï¼Œè¿”å›æ•´ä½“çš„ state ä¸­ï¼Œæœ€åæ”¹å˜æ•´ä½“çš„ state (å¼•ç”¨)ã€‚
    const nextState = {}
    // éå†æ‰€æœ‰ reducer
    for (let i = 0; i < reducerKeys.length; i++) {
      const key = reducerKeys[i];
      const reducer = reducers[key];  // counterReducer, infoReducer
      // æŸä¸ª reducer çš„æ—§åº“
      const prevStateForKey = state[key];
      // æ‰§è¡ŒåŠ¨ä½œï¼ŒçŠ¶æ€æ”¹å˜ï¼Œå¾—åˆ°è¯¥ reducer çš„æ–°åº“
      const nextStateForKey = reducer(prevStateForKey, action);
      // reducerçš„keyå’Œstateçš„keyè¦ä¿æŒä¸€è‡´
      // è¯¥ reducer çš„ä¿å­˜åˆ°ä¸€ä»½æ–°çš„æ€»çŠ¶æ€é‡Œ
      nextState[key] = nextStateForKey;
    }
    return nextState;
  }
}
```


### fapplyMiddleware.js  fä¸­é—´ä»¶åŸç† (ä¸­é—´ä»¶ä»¬æŠŠstore.dipatchä½œä¸º`ğŸ§…çš„æœ€å†…æ ¸`åŒ…è£¹èµ·æ¥)
reduxçš„ä¸­é—´ä»¶åŸç†æ˜¯:
1. å…ˆæŠŠ store ä¼ å…¥æ¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªnextå‡½æ•°ï¼Œè¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ `(next) => (action) => {...}`
2. æŠŠè¿™äº›å‡½æ•°é€šè¿‡ compose ç»„åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªæ€»ä½“çš„å‡½æ•°ï¼Œä¹Ÿæ˜¯æ¥å—ä¸€ä¸ªnextå‡½æ•°ï¼Œè¿”å›å¦ä¸€ä¸ªå‡½æ•°: `(next) => ex(time(log(next)))`
3. æŠŠ `store.dispatch` ä½œä¸º `next` å‚æ•°ï¼Œä¼ ç»™è¿™ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªç¬¦åˆæ´‹è‘±æ¨¡å‹ğŸ§…çš„å‡½æ•°ï¼Œæ´‹è‘±æ¨¡å‹æœ€å†…å±‚å°±æ˜¯åŸå§‹çš„ store.dispatch:
`(action) => { ex1(nextå‰),  time1,log1,store.dispatch,log2,time2 (next),  ex2(nextå)  }`

å¦‚æœä¼ å…¥çš„é¡ºåºæ˜¯ applyMiddleware(å·¦1,å·¦2,å·¦3),  é‚£ä¹ˆæœ€ç»ˆçš„æ‰§è¡Œé¡ºåºæ˜¯ å·¦1,å·¦2,å·¦3,store.disptach,å·¦3,å·¦2,å·¦1ã€‚

```js
// dispatch çš„æ—¶å€™ï¼Œä¾æ¬¡æ‰§è¡Œæ‰€æœ‰çš„ middlewareã€‚
const applyMiddleware = function (...middlewares) {

  // è¿”å›è¿™ä¸ªå‡½æ•°ï¼Œç»™ createStore.js é‡Œçš„ rewriteCreateStoreFunction è°ƒç”¨ï¼Œå†è¿”å›ä¸€ä¸ªæ–°çš„ createStore å‡½æ•°
  return function (oldCreateStore) {

    // è¿™ä¸ªç©æ„å„¿æ˜¯æ–°çš„ createStore å‡½æ•°ï¼ŒæŠŠä¸­é—´ä»¶åµŒå…¥åˆ° dispatch æµç¨‹ä¸­ã€‚
    return function (reducer, initState) {
      const store = oldCreateStore(reducer, initState);
      const simpleStore = { getState: store.getState };

      // ä¸­é—´ä»¶å…ˆä¾æ¬¡æ‰§è¡Œä¸€éï¼Œè½¬æˆ (next) => xxx, ç»“æœæ”¾åˆ°é“¾ä¸­ï¼Œå½¢æˆæ•°ç»„
      // æ¯ä¸€ä¸ª middleware å˜æˆä¸€ä¸ª m(simpleStore) çš„æ‰§è¡Œç»“æœ ----> ä¸€ä¸ªå‡½æ•°: (next) => (action) => {...}
      // [
      //  (next) => (action) => {...log...}, 
      //  (next) => (action) => {...exception...},
      //  ...
      // ]
      const chain = middlewares.map(m => m(simpleStore));
      // ç°åœ¨ä¸­é—´ä»¶å·²ç»å˜æˆäº† (next) => (action) => xxx è¿™ä¸ªé¬¼æ ·å­,
      // ç„¶å compose ä»å³åˆ°å·¦æŠŠä¸­é—´ä»¶ç»„åˆèµ·æ¥:
      // ex, time, log ä¸‰ä¸ªè½¬æˆ (next) => .. çš„ä¸­é—´ä»¶ï¼Œå˜æˆ (...args) => ex(time(log(...args))) 

      // ä¼ å…¥ store.dispatch æ‰§è¡Œï¼Œè¿”å› ex(time(log(store.dispatch))) çš„æ‰§è¡Œç»“æœ, æ‰§è¡Œè¿‡ç¨‹æ˜¯:

      // 1. log ä¸­é—´ä»¶ â€(next) => (action) => xxxâ€œ æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸º next ç»™ time ä¸­é—´ä»¶
      // ex(time(   (action) => {..log1..., store.dispatch, ..log2...}       ))

      // 2. time ä¸­é—´ä»¶æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸º next ç»™ exception ä¸­é—´ä»¶
      // ex(   (action) => {..time..}   )

      // 3. æœ€åè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç»™ dispatch
      // (action) => { é”™è¯¯å¤„ç†(nextä¹‹å‰)...,  timeä¸­é—´ä»¶æ‰§è¡Œä¼ è¿‡æ¥çš„å‡½æ•°(action) => {...} (next),  xxx(nextä¹‹å)  }

      // æ‰€ä»¥ï¼Œåœ¨ dispatch çš„æ—¶å€™ï¼Œä¸­é—´ä»¶æ ¹æ®ä¼ å…¥ applyMiddleware çš„é¡ºåºï¼Œä»å·¦å¾€å³ï¼ŒæŒ‰æ´‹è‘±æ¨¡å‹ğŸ§…æ‰§è¡Œã€‚(å·¦1,å·¦2,å·¦3,store.disptach,å·¦3,å·¦2,å·¦1)
      const dispatch = compose(...chain)(store.dispatch);

      console.log('dispatch', dispatch);

      return {
        ...store,
        dispatch
      }
    }
  }
}
export default applyMiddleware;
```

### fbindActionCreators.js
æŠŠæ‰€æœ‰åˆ›å»º action çš„å‡½æ•°é›†ä¸­åˆ°ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚
æ¯”å¦‚ const actions = bindActionCreators({ Add, setName }, store.dispatch);  
ä½¿ç”¨æ—¶ actions.Add(); ç›¸å½“äº store.dispatch({ type: 'ADD' });
```js
/**
 * @param {Function} actionCreator ç”¨æˆ·å®šä¹‰çš„ action å‡½æ•°ï¼Œæ¯”å¦‚ setName å‡½æ•°ã€‚
 * @param {Function} dispatch store.dispatch
 */
function bindActionCreator(actionCreator, dispatch) {
  return function () {
    return dispatch(actionCreator.apply(null, arguments));
  }
}
export default function bindActionCreators(actionCreators, dispatch) {
  const b = {};
  // æŠŠæ‰€æœ‰åˆ›å»º action çš„å‡½æ•°é›†ä¸­åˆ°ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚
  // for..in  éå†æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå®ƒä¼šæŠŠåŸå‹ä¸Šçš„å±æ€§ä¹Ÿæ‰¾å‡ºæ¥ï¼Œåªä¸è¿‡ Object.prototype ä¸Šçš„å±æ€§æ˜¯ä¸å¯æšä¸¾çš„ï¼Œæ‰€ä»¥æ²¡å‡ºæ¥ã€‚
  for (const key in actionCreators) {
    const action = actionCreators[key];
    if (typeof action === 'function') {
      b[key] = bindActionCreator(action, dispatch);
    }
  }
  return b;
}
```

## fcompose.js
ä»å³å¾€å·¦ç»„åˆå‡½æ•°ï¼Œæ¯”å¦‚ compose(f, g, h) è¿”å›ä¸€ä¸ªå‡½æ•°: (...args) => f(g(h(...args)))
```js
export default function compose(...funcs) {
  if (funcs.length === 0) {
    return (arg) => arg
  }
  if (funcs.length === 1) {
    return funcs[0]
  }
  // a ç›¸å½“äºä¹‹å‰æ‰€æœ‰ç»„åˆå¥½çš„å‡½æ•°, b æ˜¯æœ¬æ¬¡è¦ç»„åˆçš„å‡½æ•°, 
  // æ¯”å¦‚: (f(g(...args)), h) => (...args) => f(g(h(...args)))
  return funcs.reduce((a, b) => (...args) => a(b(...args)))
}
```

# fRedux-Toolkit fredux-toolkit fToolkit
redux å®˜æ–¹æ¨èçš„å·¥å…·é›†ï¼Œæ¯” redux æ›´åŠ è½»é‡ã€‚æœ€ä½³å®è·µã€‚

# fReact-Redux  freact-redux
`react-redux`æ˜¯å°†`Redux store`å’Œ`React UI`ç›¸ç»“åˆçš„`å®˜æ–¹ç»‘å®šå±‚`ã€‚
å®ƒä½¿ react ç»„ä»¶å¯ä»¥ä» redux store è¯»å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥å‘ store å‘èµ· action ä»¥æ›´æ–°çŠ¶æ€ã€‚
åŸºäº context API å°è£…ã€‚
## æ‰‹å†™æºç 
https://github.com/ronnycyy/state-manager/tree/main/react-redux (ã€æ‰‹å†™æºç ç³»åˆ—ã€‘40åˆ†é’Ÿå¸¦ä½ ä»0åˆ°1å®ç°ä¸€ä¸ªreact-redux)


# fRecoil frecoil fåŸå­åŒ–
Recoil æ˜¯ React çš„çŠ¶æ€ç®¡ç†åº“ï¼Œåªèƒ½ç”¨åœ¨ React é‡Œè¾¹ã€‚
## ç›®æ ‡
reduxå¤ªå¤æ‚, å¾—åˆ›å»º store, reducer, action, ..., å’Œ react åˆèµ·æ¥è¿˜å¾—åˆ›å»º react-reduxã€‚é¡¹ç›®å¤æ‚æ—¶ï¼Œä¼šæœ‰å¤šå±‚ Provider æ ‘ğŸŒ².
å› æ­¤ï¼ŒRecoilçš„ç›®æ ‡æ˜¯: æœ€å°åŒ–stateï¼Œä¸è¦æœ‰åŒ…è£…ï¼Œä¸è¦å¤šå±‚æ¬¡çš„Providerã€‚
## æ ¸å¿ƒ
åŸå­çŠ¶æ€å˜åŒ–(text) -> è¡ç”ŸçŠ¶æ€å˜åŒ–(text.length) -> è§†å›¾æ›´æ–°ã€‚
## æ‰‹å†™æºç 
https://github.com/ronnycyy/state-manager/tree/main/recoil  (å‰ç«¯ä¸­çš„æ•°æ®ç»“æ„å’Œç®—æ³•2)

# fvuex
å¤§åƒåœ¾ åªæœ‰ä¸€ä¸ªæ–‡ä»¶ ä¹Ÿæ˜¯åŸºäº reduxã€‚


# fReactçŠ¶æ€ä¼˜åŒ–
https://github.com/ronnycyy/state-manager/tree/main/react
ä¸¤ç‚¹åŸåˆ™:
1. å°†å˜çš„å’Œä¸å˜çš„åˆ†ç¦»ã€‚
2. å°†`å¼•ç”¨æ¯”è¾ƒ`æ”¹ä¸º`æµ…æ¯”è¾ƒ`ã€‚

## å°†å˜çš„ä¸ä¸å˜çš„åˆ†ç¦»
é€‚ç”¨äº: çˆ¶ç»„ä»¶çš„stateå¯åˆ†ç¦»ç»™å­ç»„ä»¶ã€‚
å°†stateå˜åŒ–çš„å­ç»„ä»¶ä»çˆ¶ç»„ä»¶ä¸­æŠ½ç¦»å‡ºæ¥, ä½¿å­ç»„ä»¶å•ç‹¬æ¸²æŸ“ï¼Œè€Œä¸å½±å“çˆ¶/å…„å¼Ÿç»„ä»¶ã€‚
```js
function App() {
  console.log('App render~');
  return (
    <div>
      <h1>å°†å˜çš„éƒ¨åˆ†å’Œä¸å˜çš„éƒ¨åˆ†åˆ†ç¦»</h1>
      {/* æŠ½ç¦»äº†å˜çš„éƒ¨åˆ†ï¼Œç°åœ¨åªæ˜¯ Input ç»„ä»¶é‡æ–°æ¸²æŸ“ Expensive ä¸ä¼š render äº† */}
      <Input />
      {/* beginWork ä¸­å–å¾— newProps å’Œ oldPropsï¼Œåˆ¤æ–­æ˜¯ç›¸ç­‰çš„ */}
      <Expensive />
    </div>
  );
}
function Input() {
  console.log('Input render~');
  const [text, setText] = useState('');
  // åè°ƒé˜¶æ®µ:  App -> div -> h1 -> Input(æ‰§è¡Œ) -> Expensive (æ·±åº¦ä¼˜å…ˆéå†)
  // å‰é¢éƒ½å¯¹æ¯”å¯¹æ¯”, æ²¡å˜åŒ–æ²¡å˜åŒ–,  bailout bailout..., ç›´åˆ° Input, å‘ç°å‰å state ä¸ä¸€è‡´ï¼Œäºæ˜¯æ‰§è¡Œã€‚ 
  // App è¢« bailout äº†ï¼Œä¸ä¼šæ‰§è¡Œçš„!  "App render~" ä¸ä¼šæ‰“å°ã€‚
  return (
    <Fragment>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <p>text is {text}</p>
    </Fragment>
  )
}
// è¿™ä¸ªç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½è¦èŠ±è´¹è‡³å°‘100ms
function Expensive() {
  console.log('Expensive render~');
  let now = performance.now();
  while (performance.now() - now < 100) { }
  console.log('è€—æ—¶çš„ç»„ä»¶render');
  return <p>è€—æ—¶çš„ç»„ä»¶</p>
}
```
## å°†`å¼•ç”¨æ¯”è¾ƒ`æ”¹ä¸º`æµ…æ¯”è¾ƒ`
é€‚ç”¨äº: çˆ¶ç»„ä»¶çš„stateä¸å¯åˆ†ç¦»ã€‚
çˆ¶ç»„ä»¶stateå˜åŒ–ï¼Œå¯¼è‡´æœ¬æ¥ä¸ç”¨å˜åŒ–çš„å­ç»„ä»¶ä¹Ÿè·Ÿç€é‡æ–°æ¸²æŸ“ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåº”åœ¨çˆ¶ç»„ä»¶å¤–éƒ¨ä½¿ç”¨ React.memo åŒ…è£¹å­ç»„ä»¶ï¼Œå†å¼•å…¥åˆ°çˆ¶ç»„ä»¶ã€‚
```js
// åœ¨çˆ¶ç»„ä»¶å¤–å±‚åŒ…è£¹ï¼Œè¿™æ · Input æ‰§è¡Œæ—¶å°±ä¸ä¼šå½±å“ã€‚
const MemoUnderInput = React.memo(UnderInput);
function Input() {
  console.log('Input render~');
  const [text, setText] = useState('');
  return (
    <Fragment>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <p>text is {text}</p>
      {/* <UnderInput /> */}
      {/*
        React.memo é»˜è®¤æƒ…å†µä¸‹ä¼šå¯¹å¤æ‚ props å¯¹è±¡åšæµ…æ¯”è¾ƒã€‚(æ¯”å¦‚ shallowEqual({},{}) === true, è¿™ä¸¤ä¸ªç©ºå¯¹è±¡å¦‚æœç”¨å¼•ç”¨æ¯”è¾ƒç»“æœæ˜¯false)
        æ‰€ä»¥ä¸æ˜¯å¼•ç”¨æ¯”è¾ƒäº†ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå— Input å½±å“é‡æ–°æ‰§è¡Œï¼Œè€Œæ˜¯ä¸æ‰§è¡Œã€‚
      */}
      <MemoUnderInput />
    </Fragment>
  )
}
```

# å‰ç«¯çŠ¶æ€ç®¡ç†åº“çš„å¯¹æ¯”
Redux `æ—¶é—´æ—…è¡Œ`çš„ç†å¿µéå¸¸ç»å…¸ï¼Œç”±è¿™ä¸ªç†å¿µå‘å±•å‡ºäº†å¾ˆå¤šçŠ¶æ€ç®¡ç†åº“ã€‚
åº”è¯¥æ€ä¹ˆé€‰æ‹© React çŠ¶æ€ç®¡ç†åº“ï¼Ÿä»ä¸¤ä¸ªè§’åº¦è¯´:
1. é¡¹ç›®è§„æ¨¡
2. é¡¹ç›®ç±»å‹

## é¡¹ç›®è§„æ¨¡
1. å¾ˆå°çš„é¡¹ç›®ï¼Œç©å…·é¡¹ç›®ï¼Œæ²¡å¿…è¦ç”¨åº“äº†ï¼Œç›´æ¥ context API å°±è¡Œã€‚
2. å¤§ä¸€ä¸¢ä¸¢çš„é¡¹ç›®ï¼Œä½†è¿˜æ˜¯ä¸€ä¸ªäººå†™çš„ï¼Œæ¯”å¦‚çŸ­æœŸçš„æ´»åŠ¨é¡µï¼Œå¯ä»¥ç”¨ä¸€äº›è¿·ä½ çš„åº“ï¼Œæ¯”å¦‚ unstated(åŸºäºcontextå°è£…)
3. å†å¤§ä¸€ç‚¹ï¼Œéœ€è¦å‡ ä¸ªå°ä¼™ä¼´åˆä½œçš„ï¼Œå°±å¯ä»¥ç”¨ dva, mobx, jotai, recoil ç­‰åŸºäº`åŸå­çŠ¶æ€`ç†å¿µçš„ã€‚

## é¡¹ç›®ç±»å‹
1. æ™®é€šçš„åå°ç®¡ç†é¡µï¼Œè¦å¡«å¾ˆå¤šè¡¨å• => åŒå‘æ•°æ®ç»‘å®š => é€‚åˆç”¨ mobxã€‚
2. å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæˆ‘éœ€è¦å®Œæˆ `æ’¤é”€/é‡åš` è¿™æ ·çš„åŠŸèƒ½ï¼Œé‚£å°±é€‚åˆç”¨ redux ç³»åˆ—çš„`æ—¶é—´æ—…è¡Œ`çš„åº“ã€‚


==============================  fReact  ==============================
## fsetStateæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥  fthis.setStateæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥
åœ¨`React`çš„ä¸åŒæ¨¡å¼ä¸‹ï¼Œ`this.setState`æœ‰ä¸åŒçš„è¡¨ç°:
1. åœ¨ legacy æ¨¡å¼ä¸‹ï¼Œå¦‚æœå‘½ä¸­äº† batchedUpdate é€»è¾‘ï¼Œå°±æ˜¯å¼‚æ­¥ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­ batchedUpdate é€»è¾‘å°±æ˜¯åŒæ­¥ã€‚
2. åœ¨ concurrent æ¨¡å¼ä¸‹ï¼Œthis.setState å§‹ç»ˆè¡¨ç°ä¸ºå¼‚æ­¥ã€‚

# fé˜²æ­¢å­ç»„ä»¶é‡æ–°æ¸²æŸ“ fæ€§èƒ½ä¼˜åŒ–
1. React.memo(function SonComponent() {}, function areEqual(prevProps, nextProps) {...})
2. useMemo(() => <>{...SonComponent}</>, [])
3. PureComponent æµ…æ¯”è¾ƒ æ›´æ–°å‰åçš„props å’Œ æ›´æ–°å‰åçš„state
4. shouldComponentUpdate(nextProps, nextState)

åœ¨ React ä¸­ï¼Œæ§åˆ¶ç»„ä»¶æ˜¯å¦æ¸²æŸ“æœ‰ä¸‰ä¸ªæ–¹é¢: props, state å’Œ context, åªè¦è¿™ä¸‰è€…éƒ½ä¸å˜ï¼Œç»„ä»¶å°±ä¸ä¼šæ¸²æŸ“ã€‚
å¦‚æœæ˜¯çˆ¶ç»„ä»¶å¼•èµ·çš„å­ç»„ä»¶æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯è¯´å­ç»„ä»¶çš„ state å’Œ context éƒ½ä¸å˜ï¼Œé‚£ä¹ˆåªéœ€è¦æ§åˆ¶ props ä¸å˜å³å¯ã€‚ä½†æ˜¯ React çš„é»˜è®¤ props æ¯”è¾ƒç­–ç•¥æ˜¯`å¼•ç”¨æ¯”è¾ƒ`ï¼Œè€Œä¸”æ¯æ¬¡æ›´æ–° props éƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå³ä½¿æ›´æ–°å‰å props çš„å±æ€§æ²¡æœ‰ä»»ä½•æ”¹å˜ï¼Œå­ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ã€‚
è¿™æ—¶å€™å°±è¦å°†`å¼•ç”¨æ¯”è¾ƒ`æ”¹ä¸º`æµ…æ¯”è¾ƒ`ï¼Œä½¿ç”¨ React çš„æ€§èƒ½ä¼˜åŒ– APIï¼Œå¦‚ React.memo, useMemo, PureComponent, shouldComponentUpdateã€‚
## fmemo fReact.memo  React.memo(ReactComponent, arePropsEqual)
React.memo æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª React ç»„ä»¶ï¼Œå¦‚æœè¿™ä¸ªç»„ä»¶çš„ props åœ¨æ›´æ–°å‰å`æµ…æ¯”è¾ƒ`ä¸å˜ï¼Œåˆ™ç»„ä»¶ä¸å¿…é‡æ–°æ¸²æŸ“ã€‚
å¦‚æœæƒ³æ§åˆ¶æ¯”è¾ƒè¿‡ç¨‹ï¼Œå¯ä»¥å°†è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°ä¼ å…¥ React.memo çš„ç¬¬äºŒä¸ªå‡½æ•° areEqual, å®ƒä¼šå¾—åˆ° prevProps å’Œ nextPropsï¼Œå¦‚æœ props æ¯”è¾ƒç›¸ç­‰è¿”å› true, é‚£å°±ä¸ä¼šé‡æ–°æ¸²æŸ“; å¦‚æœæ¯”è¾ƒä¸ç­‰è¿”å› falseï¼Œå°±ä¼šé‡æ–°æ¸²æŸ“ã€‚
## fuseMemo  fuseMemo(create, deps)
useMemoæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯createå‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯depsæ•°ç»„ï¼Œè¿”å›å€¼æ˜¯createå‡½æ•°é¦–æ¬¡æ‰§è¡Œçš„ç»“æœã€‚å½“ depsæ•°ç»„é‡Œçš„æ‰€æœ‰ä¾èµ–é¡¹éƒ½æ²¡æœ‰æ”¹å˜æ—¶ï¼Œæ¯æ¬¡æ‰§è¡ŒuseMemoéƒ½è¿”å›ä¸€æ ·çš„ç¼“å­˜å€¼ã€‚è€Œå½“ä»»æ„ä¸€ä¸ªä¾èµ–é¡¹å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šé‡æ–°æ‰§è¡Œcreateï¼Œå¾—åˆ°çš„ç»“æœä½œä¸ºuseMemoçš„æ–°çš„ç¼“å­˜å€¼è¿”å›ã€‚
useMemoçš„ç¼“å­˜å€¼æ˜¯ç»‘å®šåœ¨å‡½æ•°ç»„ä»¶å¯¹åº”çš„ fiber å¯¹è±¡ä¸Šï¼Œåªè¦ç»„ä»¶ä¸é”€æ¯ï¼Œç¼“å­˜å€¼å°±ä¸€ç›´å­˜åœ¨ã€‚
æˆ‘ä»¬å¯ä»¥æŠŠå­ç»„ä»¶ä½œä¸º create çš„è¿”å›ç»“æœæ”¾å…¥ useMemoï¼ŒåŒæ—¶ä¼ å…¥ç©ºçš„ deps æ•°ç»„ï¼Œè¿™æ ·çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå­ç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚
## fPureComponent   class Component extends React.PureComponent
ä»¥æµ…æ¯”è¾ƒæ›´æ–°å‰åçš„ prop å’Œ state çš„æ–¹å¼æ¥å®ç°äº† shouldComponentã€‚
## fshouldComponentUpdate
shouldComponentUpdate(nextProps, nextState), è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå†³å®šç±»ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚

# fhooks
## è®²æ¦‚å¿µ
Hook æ˜¯ React 16.8.0 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒè®©å‡½æ•°ç»„ä»¶ä¹Ÿèƒ½åšç±»ç»„ä»¶èƒ½åšçš„å¤§éƒ¨åˆ†çš„äº‹ï¼Œé€šè¿‡hookså‡½æ•°ç»„ä»¶æœ‰äº†è‡ªå·±çš„çŠ¶æ€ï¼Œå¯ä»¥å¤„ç†å‰¯ä½œç”¨ï¼Œèƒ½è·å– ref ç­‰ã€‚
## è¯´ç”¨é€” (fè§£å†³äº†ä»€ä¹ˆé—®é¢˜ fé—®é¢˜)
* åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘
ä½¿ç”¨ Hook å¯ä»¥ä»ç»„ä»¶ä¸­æå–çŠ¶æ€é€»è¾‘ï¼Œä½¿å¾—è¿™äº›é€»è¾‘å¯ä»¥å•ç‹¬æµ‹è¯•å¹¶å¤ç”¨ã€‚Hook ä½¿ä½ åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚è¿™ä½¿å¾—åœ¨ç»„ä»¶é—´æˆ–ç¤¾åŒºå†…å…±äº« Hook å˜å¾—æ›´ä¾¿æ·ã€‚
* ç»„åˆå¤æ‚ç»„ä»¶çš„ç›¸å…³é€»è¾‘
åœ¨ hook ä¹‹å‰æˆ‘ä»¬å¸¸å¸¸åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ç¼–å†™ä¸€äº›ä¸ç›¸å…³çš„ä»£ç ï¼Œæ¯”å¦‚åœ¨ componentDidMount ä¸­è·å–æ•°æ®ï¼ŒåŒæ—¶åˆè®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œç„¶ååœ¨ componentWillUnmount ä¸­æ¸…é™¤ï¼Œè¿™æ ·å°±æŠŠä¸ç›¸å…³çš„ä»£ç ç»„åˆåœ¨ä¸€èµ·ï¼Œè€Œç›¸å…³çš„ä»£ç åˆåˆ†åœ¨äº†ä¸åŒåœ°æ–¹ï¼Œè¿™ç§å†™æ³•å¾ˆå®¹æ˜“å¼•èµ· bugã€‚
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œå¹¶éå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ã€‚
* æ‹¥æŠ±å‡½æ•°å¼ç¼–ç¨‹
æ ¹æ®å®˜ç½‘çš„æè¿°, ç¼–å†™ class çš„æ–¹å¼ä½¿å¾—ä»£ç ä¸èƒ½å¾ˆå¥½åœ°å‹ç¼©ï¼Œå¹¶ä¸”ä¼šä½¿çƒ­é‡è½½å‡ºç°ä¸ç¨³å®šçš„æƒ…å†µã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒHook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§, æ¯”å¦‚ç»´æŠ¤çŠ¶æ€ï¼Œå¤„ç†å‰¯ä½œç”¨ï¼Œè·å–refç­‰ã€‚è¿™æ ·å°±èƒ½ç”¨å‡½æ•°ç»„ä»¶æ›¿ä»£å¤§éƒ¨åˆ†ç±»ç»„ä»¶ï¼Œæ‹¥æŠ±å‡½æ•°å¼ç¼–ç¨‹ã€‚
`å®˜ç½‘: æˆ‘ä»¬å‡†å¤‡è®© Hook è¦†ç›–æ‰€æœ‰ class ç»„ä»¶çš„ä½¿ç”¨åœºæ™¯ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ç»§ç»­ä¸º class ç»„ä»¶æä¾›æ”¯æŒã€‚`
## ä¼˜ç¼ºç‚¹

## fåŸç† fhooksåŸç† fä½ æ¥èŠä¸€ä¸‹hooksçš„åŸç†æ˜¯ä»€ä¹ˆ
ä»æ•°æ®ç»“æ„çš„è§’åº¦è¯´ï¼Œhooksæ˜¯ä¸€æ¡å•å‘é“¾è¡¨ï¼Œå­˜åœ¨äºfiber.memoizedStateï¼Œå½“ç„¶è¿™ä¸ªfiberå¾—æ˜¯å‡½æ•°ç»„ä»¶çš„fiberï¼Œé€šè¿‡ next æŒ‡é’ˆå°†æœ¬å‡½æ•°ç»„ä»¶çš„æ‰€æœ‰ hook é¡ºåºè¿æ¥åˆ°ä¸€èµ·:`fiber.memoizedState: hook1 -> hook2 -> ...`ã€‚

å‡½æ•°ç»„ä»¶ render æ—¶ï¼Œåˆ†ä¸º é¦–æ¬¡æ‰§è¡Œ å’Œ æ›´æ–° ä¸¤ç§æƒ…å†µã€‚ä»¥ useState ä¸ºä¾‹, `é¦–æ¬¡æ‰§è¡Œ`åšçš„æ˜¯ç”Ÿæˆ hook åŠ å…¥åˆ° fiber.memoizedState, è¿”å›åˆå§‹å€¼å’Œæ›´æ–°å‡½æ•°ä¹Ÿå°±æ˜¯dispatchAction; è€Œ`æ›´æ–°`æ˜¯æ‰§è¡Œ dispathActionï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åˆ›å»º update å¯¹è±¡ï¼ŒåŠ å…¥åˆ° hook.queue.pending;

ä¸¤ç§æƒ…å†µéƒ½ä¼šä¾æ¬¡æ‰§è¡Œ hook, è®¡ç®—æ¯ä¸ª hook çš„çŠ¶æ€ï¼Œæ”¾åˆ° hook.memoizedState ä¸­ã€‚çŠ¶æ€è®¡ç®—æ˜¯åŸºäº hook.queue.pending è¿™æ¡ç¯çŠ¶é“¾è¡¨ï¼Œé“¾è¡¨ä¸Šçš„æ¯ä¸ªç»“æ„éƒ½æ˜¯ä¸€ä¸ª Update å¯¹è±¡ï¼Œupdate ä¸Šä¿å­˜ç€ç”¨æˆ·ä¼ å…¥çš„action, æ¯”å¦‚ setCount(c => c + 1), å…¶ä¸­çš„ c => c + 1 è¿™ä¸ªç®­å¤´å‡½æ•°å°±æ˜¯ actionã€‚ Hook ä¼šåŸºäº hook åŸæœ‰çš„ memoizedStateï¼Œç„¶åæ‰§è¡Œä¸€åœˆçš„ç¯çŠ¶é“¾è¡¨ä¸Šçš„ Update å¯¹è±¡ï¼Œæœ€ç»ˆå¾—åˆ°æ–°çš„ memoizedState è¿”å›ã€‚
```ts
interface Hook {
  baseQueue: null;
  baseState: unknown;  // åŸºäºæŸä¸ªçŠ¶æ€ï¼Œè®¡ç®—æœ¬æ¬¡ memoizedState
  memoizedState: unknown;   // æœ¬ hook çš„çŠ¶æ€å€¼
  next: Hook;  // ä¸‹ä¸€ä¸ª hook
  queue: Update;  // hook ä¸Šçš„ Update å¯¹è±¡
}
interface Update {
  action: Function | unknown;  // å¦‚ c=>c+1
  next: Update;  // æŒ‡å‘ä¸‹ä¸€ä¸ª update å¯¹è±¡
}
```
## fuseEffect feffect
React åœ¨å®Œæˆå¯¹ DOM çš„æ›´æ”¹åè¿è¡Œâ€œå‰¯ä½œç”¨â€å‡½æ•°ã€‚åŸç†æ˜¯åœ¨ commit é˜¶æ®µç»“æŸåå¼‚æ­¥æ‰§è¡Œã€‚
## fuseLayoutEffect
åœ¨ commit é˜¶æ®µç»“æŸæ—¶åŒæ­¥æ‰§è¡Œã€‚
## fä½¿ç”¨hooksçš„æ³¨æ„äº‹é¡¹
1. çº¦å®šå‘½åä»¥useXXå¼€å¤´
2. å¿…é¡»åœ¨å‡½æ•°ç»„ä»¶å†…ä½¿ç”¨ï¼Œä¸èƒ½åœ¨ç±»ç»„ä»¶é‡Œä½¿ç”¨
3. å¿…é¡»åœ¨å‡½æ•°ç»„ä»¶ä½œç”¨åŸŸé¡¶éƒ¨ä½¿ç”¨
4. æ¯æ¬¡ç»„ä»¶renderä¸èƒ½æ‰“ä¹±hooksçš„æ‰§è¡Œé¡ºåºï¼Œæ¯”å¦‚æ”¾åˆ°æ¡ä»¶è¯­å¥ã€æˆ–å¾ªç¯è¯­å¥ä¸­æ˜¯ä¸è¡Œçš„ã€‚
## ä¸ºä»€ä¹ˆhookä¸èƒ½æ”¾åœ¨æ¡ä»¶è¯­å¥ä¸­
æ¯æ¬¡Appæ›´æ–°çš„æ—¶å€™ï¼Œhookséƒ½å¿…é¡»éµç…§å®Œå…¨ä¸€æ ·çš„é¡ºåºï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¿å­˜åœ¨ä¸€æ¡é“¾è¡¨ä¸­çš„ï¼Œæ›´æ–°çš„æ—¶å€™åªä¼šæŒ‰é“¾è¡¨é¡ºåºæ›´æ–°ã€‚å¦‚æœæ‰“ä¹±äº†é¡ºåºï¼Œé“¾è¡¨ç»“ç‚¹å’Œç»„ä»¶hookçš„å¯¹åº”å…³ç³»å°±ä¼šå‡ºé”™ã€‚
## fuseStateå‘ç”Ÿäº†ä»€ä¹ˆ
åŸºäºè¿™ä¸ªuseStateä»£è¡¨çš„hookçš„hook.memoizedStateï¼Œéå† hook çš„ update ç¯: hook.queue.pendingï¼Œé¡ºåºæ‰§è¡Œæ‰€æœ‰çš„updateï¼Œä¸Šä¸€ä¸ªçš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªçš„è¾“å…¥ï¼Œä¸€ç›´è®¡ç®—åˆ°æœ€åï¼Œå¾—åˆ°æœ€ç»ˆçš„stateï¼Œä½œä¸ºæ–°çš„hook.memoizedStateï¼Œæ¸…ç©ºæœ¬hookçš„updateç¯ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬0é¡¹æ˜¯æ›´æ–°åçš„çŠ¶æ€ï¼Œç¬¬1é¡¹æ˜¯dispatch, ç„¶åæ›´æ–°å‡½æ•°ç»„ä»¶ã€‚
## fsetNumå‘ç”Ÿäº†ä»€ä¹ˆ
setNum -> æ”¾ç½®updateå¯¹è±¡åˆ°hookä¸Š(å¤šæ¬¡setNumå°±æœ‰å¤šä¸ªupdateå¯¹è±¡ï¼Œå½¢æˆä¸€ä¸ªç¯)Appé‡æ–°render -> æ‰§è¡Œ useState -> å¾—åˆ°æ–°çŠ¶æ€num -> åŸºäºæ–°çŠ¶æ€å¾—åˆ°æ–°çš„ReactElement -> æ¸²æŸ“æ–°è§†å›¾
## fhookç›¸å…³å±æ€§
fiber.memoizedStateæ˜¯ hook
hook.memoizedState æ˜¯å½“å‰ hook çš„çŠ¶æ€
hook.next æ˜¯ä¸‹ä¸€ä¸ªhook
hook.queue.pending æ˜¯æœ€åä¸€ä¸ª updateï¼Œä¸‹ä¸€ä¸ªå°±æ˜¯ç¬¬ä¸€ä¸ª updateã€‚
update.nextæ˜¯ä¸‹ä¸€ä¸ªupdate
update.actionæ˜¯å¾…æ›´æ–°çš„æ“ä½œï¼Œå¦‚ num => num+1

## fè‡ªå®šä¹‰hooks fReactå¦‚ä½•å°è£…è‡ªå®šä¹‰hooks
è‡ªå®šä¹‰ Hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ â€œuseâ€ å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ Hookã€‚
è‡ªå®šä¹‰ hook çš„ state æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œhook çš„æ¯æ¬¡è°ƒç”¨éƒ½æœ‰ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ stateï¼Œå› ä¸ºåœ¨åŒä¸€ä¸ªç»„ä»¶ä¸­å¤šæ¬¡è°ƒç”¨åŒä¸€ä¸ªè‡ªå®šä¹‰hookï¼Œå®ƒä»¬çš„çŠ¶æ€ä¹Ÿäº’ä¸å½±å“ã€‚
### fè‡ªå®šä¹‰hookså¿…é¡»ä»¥"use"å¼€å¤´å—ï¼Ÿ
å¿…é¡»å¦‚æ­¤ã€‚è¿™ä¸ªçº¦å®šéå¸¸é‡è¦ã€‚ä¸éµå¾ªçš„è¯ï¼Œç”±äºæ— æ³•åˆ¤æ–­æŸä¸ªå‡½æ•°æ˜¯å¦åŒ…å«å¯¹å…¶å†…éƒ¨ Hook çš„è°ƒç”¨ï¼ŒReact å°†æ— æ³•è‡ªåŠ¨æ£€æŸ¥ä½ çš„ Hook æ˜¯å¦è¿åäº† Hook çš„è§„åˆ™ã€‚
### fè‡ªå®šä¹‰hooksçš„ç”¨é€”
è‡ªå®šä¹‰ Hook è§£å†³äº†ä»¥å‰åœ¨ React ç»„ä»¶ä¸­æ— æ³•çµæ´»å…±äº«é€»è¾‘çš„é—®é¢˜ã€‚

## fé«˜é˜¶ç»„ä»¶ fHOC
é«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»¥Reactç»„ä»¶ä¸ºå‚æ•°ï¼Œç»è¿‡ä¸€ç³»åˆ—é€»è¾‘ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚
`const EnhancedComponent = higherOrderComponent(WrappedComponent);`
é«˜é˜¶ç»„ä»¶ä¸ä¼šä¿®æ”¹ä¼ å…¥çš„ç»„ä»¶ï¼Œå®ƒæ˜¯é€šè¿‡å°†ç»„ä»¶åŒ…è£…åœ¨å®¹å™¨ç»„ä»¶ä¸­æ¥ç»„æˆæ–°ç»„ä»¶ï¼Œé«˜é˜¶ç»„ä»¶æ˜¯çº¯å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚
### ä¾‹å­
react-redux çš„ connect å‡½æ•°ã€‚

# fäº‹ä»¶æœºåˆ¶ fReactäº‹ä»¶æœºåˆ¶
1. Reactå¹¶ä¸æ˜¯å°†äº‹ä»¶å›è°ƒç»‘å®šåˆ°çœŸå®çš„DOMä¸Šï¼Œè€Œæ˜¯åœ¨æ ¹ç»“ç‚¹å¤„ç›‘å¬æ‰€æœ‰çš„äº‹ä»¶ã€‚åœ¨ v17 ä¹‹å‰ï¼ŒReact äº‹ä»¶æ˜¯ç»‘å®šåœ¨ document ä¸Šçš„ï¼Œv17 ä»¥åäº‹ä»¶ç»‘å®šåˆ°äº†åº”ç”¨å¯¹åº”çš„å®¹å™¨ç»“ç‚¹ä¸Š(#root)ã€‚
2. React å®ç°äº†è‡ªå·±çš„ä¸€å¥—äº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œå½“äº‹ä»¶å‘ç”Ÿå¹¶ä¸”å†’æ³¡åˆ°æ ¹ç»“ç‚¹tå¤„çš„æ—¶å€™ï¼ŒReactå°†äº‹ä»¶å†…å®¹å°è£…å¹¶äº¤ç”±çœŸæ­£çš„å¤„ç†å‡½æ•°è¿è¡Œã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…ä»…å‡å°‘äº†å†…å­˜çš„æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚è½½é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚
3. React çš„äº‹ä»¶å¹¶ä¸æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œè€Œæ˜¯ React åˆæˆçš„äº‹ä»¶ï¼Œæ¯”å¦‚ onClick æ˜¯ç”± click åˆæˆï¼ŒonChange æ˜¯ç”± blur ï¼Œchange ï¼Œfocus ç­‰å¤šä¸ªäº‹ä»¶åˆæˆã€‚
## fä¸ºä»€ä¹ˆè¦æœ‰äº‹ä»¶ç³»ç»Ÿ
æœ‰ä¸¤ç‚¹åŸå› ï¼Œä¸€æ˜¯å…¼å®¹ä¸åŒæµè§ˆå™¨ï¼ŒäºŒæ˜¯ä¸ºäº†ç»Ÿä¸€ç®¡ç†ã€‚
1. å¯¹äºä¸åŒçš„æµè§ˆå™¨ï¼Œå¯¹äº‹ä»¶å­˜åœ¨ä¸åŒçš„å…¼å®¹æ€§ï¼ŒReact æƒ³å®ç°ä¸€ä¸ªå…¼å®¹å…¨æµè§ˆå™¨çš„æ¡†æ¶ï¼Œ ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡å°±éœ€è¦åˆ›å»ºä¸€ä¸ªå…¼å®¹å…¨æµè§ˆå™¨çš„äº‹ä»¶ç³»ç»Ÿï¼Œä»¥æ­¤æŠ¹å¹³ä¸åŒæµè§ˆå™¨çš„å·®å¼‚ã€‚
2. v17 ä¹‹å‰ React äº‹ä»¶éƒ½æ˜¯ç»‘å®šåœ¨ document ä¸Šï¼Œv17 ä¹‹å React æŠŠäº‹ä»¶ç»‘å®šåœ¨åº”ç”¨å¯¹åº”çš„å®¹å™¨ container ä¸Šï¼Œå°†äº‹ä»¶ç»‘å®šåœ¨åŒä¸€å®¹å™¨ç»Ÿä¸€ç®¡ç†ï¼Œé˜²æ­¢å¾ˆå¤šäº‹ä»¶ç›´æ¥ç»‘å®šåœ¨åŸç”Ÿçš„ DOM å…ƒç´ ä¸Šã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…å‡å°‘äº†å†…å­˜æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚è½½é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚
## fåˆæˆäº‹ä»¶
React åº”ç”¨ä¸­ï¼Œå…ƒç´ ç»‘å®šçš„äº‹ä»¶å¹¶ä¸æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œè€Œæ˜¯ React åˆæˆçš„äº‹ä»¶ï¼Œæ¯”å¦‚ onClick æ˜¯ç”± click åˆæˆï¼ŒonChange æ˜¯ç”± blur ï¼Œchange ï¼Œfocus ç­‰å¤šä¸ªäº‹ä»¶åˆæˆã€‚
### ä¼˜ç‚¹
- å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œæ›´å¥½çš„è·¨å¹³å°ï¼›
- å°†äº‹ä»¶ç»Ÿä¸€å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ï¼Œé¿å…é¢‘ç¹çš„æ–°å¢ä¸åˆ é™¤ï¼ˆåƒåœ¾å›æ”¶ï¼‰ã€‚
- æ–¹ä¾¿ react ç»Ÿä¸€ç®¡ç†å’Œäº‹åŠ¡æœºåˆ¶ã€‚
## fReactäº‹ä»¶ vs fåŸç”Ÿäº‹ä»¶
1. å¯¹äºäº‹ä»¶åç§°å‘½åæ–¹å¼ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå…¨å°å†™ï¼Œreact äº‹ä»¶é‡‡ç”¨å°é©¼å³°ï¼›
2. å¯¹äºäº‹ä»¶å‡½æ•°å¤„ç†è¯­æ³•ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå­—ç¬¦ä¸²ï¼Œreact äº‹ä»¶ä¸ºå‡½æ•°ï¼›
3. react äº‹ä»¶ä¸èƒ½é‡‡ç”¨ return false çš„æ–¹å¼æ¥é˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œå¿…é¡»è¦åœ°æ˜ç¡®åœ°è°ƒç”¨`preventDefault()`æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚
## fäº‹ä»¶æ•è· fäº‹ä»¶å†’æ³¡ fReactæ˜¯å¦‚ä½•æ¨¡æ‹Ÿäº‹ä»¶æ•è·å’Œäº‹ä»¶å†’æ³¡çš„
å½“äº‹ä»¶è§¦å‘æ—¶ï¼ŒReactä¼šä»å½“å‰fiberå‘ä¸Šéå†ï¼Œé‡åˆ°ç»‘å®šäº†äº‹ä»¶çš„fiberæ—¶ï¼Œå°±ä¼šç”¨ä¸€ä¸ªæ•°ç»„æ”¶é›†äº‹ä»¶ï¼ŒæŠŠå†’æ³¡é˜¶æ®µçš„äº‹ä»¶å›è°ƒç”¨pushæ”¾è¿›å»ï¼Œä¹Ÿå°±æ˜¯æ’å…¥åˆ°æ•°ç»„å°¾ï¼Œè€ŒæŠŠæ•è·é˜¶æ®µçš„äº‹ä»¶å›è°ƒç”¨unshiftæ”¾è¿›å»ï¼Œä¹Ÿå°±æ˜¯æ’å…¥åˆ°æ•°ç»„å¤´ã€‚ç›´åˆ°éå†åˆ°æ ¹ç»“ç‚¹ã€‚ç„¶åä¾æ¬¡æ‰§è¡Œæ•°ç»„é‡Œçš„äº‹ä»¶å›è°ƒã€‚
## fé˜»æ­¢é»˜è®¤è¡Œä¸º
åœ¨Reactåº”ç”¨ä¸­ï¼Œå¯ä»¥ç”¨`e.preventDefault()`é˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼Œä½†ä¸èƒ½ç”¨ç±»ä¼¼åŸç”Ÿäº‹ä»¶çš„`return false`æ¥é˜»æ­¢ã€‚
è¿™æ˜¯å› ä¸ºåœ¨ React ä¸­ç»™å…ƒç´ çš„äº‹ä»¶å¹¶ä¸æ˜¯çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¯¼è‡´`return false`æ–¹æ³•åœ¨ React åº”ç”¨ä¸­å¤±å»äº†ä½œç”¨ï¼ŒpreventDefault ä¹Ÿæ˜¯å•ç‹¬å¤„ç†çš„ã€‚

# ffiber fReactä¸ºä»€ä¹ˆéœ€è¦fiber?
## fä»€ä¹ˆæ˜¯Fiber
Fiber åŒ…å«ä¸‰å±‚å«ä¹‰: åè°ƒå™¨çš„æ¶æ„ã€é™æ€çš„æ•°æ®ç»“æ„ã€åŠ¨æ€çš„å·¥ä½œå•å…ƒã€‚
1. æ¶æ„
ä½œä¸ºåè°ƒå™¨çš„æ¶æ„æ¥è¯´ï¼Œä¹‹å‰ React15 çš„åè°ƒå™¨é‡‡ç”¨é€’å½’çš„æ–¹å¼æ‰§è¡Œï¼Œæ•°æ®ä¿å­˜åœ¨é€’å½’è°ƒç”¨æ ˆä¸­ï¼Œæ‰€ä»¥è¢«ç§°ä¸º stack reconcilerã€‚
è€Œ React16 çš„åè°ƒå™¨åŸºäº Fiber ç»“ç‚¹å®ç°ï¼Œè¢«æˆä¸º fiber reconcilerã€‚
2. æ•°æ®ç»“æ„
ä½œä¸ºé™æ€æ•°æ®ç»“æ„æ¥è¯´ï¼Œæ¯ä¸ª fiber ç»“ç‚¹å¯¹åº”ä¸€ä¸ª React elementï¼Œä¿å­˜äº†è¯¥ç»„ä»¶çš„ç±»å‹ï¼ˆå‡½æ•°ç»„ä»¶/ç±»ç»„ä»¶/åŸç”Ÿç»„ä»¶...ï¼‰ã€å¯¹åº”çš„DOMèŠ‚ç‚¹ç­‰ä¿¡æ¯ã€‚
3. å·¥ä½œå•å…ƒ
ä½œä¸ºåŠ¨æ€çš„å·¥ä½œå•å…ƒæ¥è¯´ï¼Œæ¯ä¸ªFiberèŠ‚ç‚¹ä¿å­˜äº†æœ¬æ¬¡æ›´æ–°ä¸­è¯¥ç»„ä»¶æ”¹å˜çš„çŠ¶æ€ã€è¦æ‰§è¡Œçš„å·¥ä½œï¼ˆéœ€è¦è¢«åˆ é™¤/è¢«æ’å…¥é¡µé¢ä¸­/è¢«æ›´æ–°...ï¼‰ã€‚

## fçº¤ç¨‹
Fiber å¹¶ä¸æ˜¯è®¡ç®—æœºæœ¯è¯­ä¸­çš„æ–°åè¯ï¼Œä»–çš„ä¸­æ–‡ç¿»è¯‘å«åšçº¤ç¨‹ï¼Œä¸è¿›ç¨‹ï¼ˆProcessï¼‰ã€çº¿ç¨‹ï¼ˆThreadï¼‰ã€åç¨‹ï¼ˆCoroutineï¼‰åŒä¸ºç¨‹åºæ‰§è¡Œè¿‡ç¨‹ã€‚åœ¨å¾ˆå¤šæ–‡ç« ä¸­å°†çº¤ç¨‹ç†è§£ä¸ºåç¨‹çš„ä¸€ç§å®ç°ã€‚åœ¨JSä¸­ï¼Œåç¨‹çš„å®ç°ä¾¿æ˜¯Generatorã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†çº¤ç¨‹(Fiber)ã€åç¨‹(Generator)ç†è§£ä¸ºä»£æ•°æ•ˆåº”æ€æƒ³åœ¨JSä¸­çš„ä½“ç°ã€‚

Fiber ä¹Ÿç§°åç¨‹æˆ–è€…çº¤ç¨‹ã€‚å®ƒå’Œçº¿ç¨‹å¹¶ä¸ä¸€æ ·ï¼Œåç¨‹æœ¬èº«æ˜¯æ²¡æœ‰å¹¶å‘æˆ–è€…å¹¶è¡Œèƒ½åŠ›çš„ï¼ˆéœ€è¦é…åˆçº¿ç¨‹ï¼‰ï¼Œå®ƒåªæ˜¯ä¸€ç§æ§åˆ¶æµç¨‹çš„è®©å‡ºæœºåˆ¶ã€‚è®©å‡º CPU çš„æ‰§è¡Œæƒï¼Œè®© CPU èƒ½åœ¨è¿™æ®µæ—¶é—´æ‰§è¡Œå…¶ä»–çš„æ“ä½œã€‚æ¸²æŸ“çš„è¿‡ç¨‹å¯ä»¥è¢«ä¸­æ–­ï¼Œå¯ä»¥å°†æ§åˆ¶æƒäº¤å›æµè§ˆå™¨ï¼Œè®©ä½ç»™é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œæµè§ˆå™¨ç©ºé—²åå†æ¢å¤æ¸²æŸ“ã€‚

React Fiberå¯ä»¥ç†è§£ä¸º:
Reactå†…éƒ¨å®ç°çš„ä¸€å¥—çŠ¶æ€æ›´æ–°æœºåˆ¶ã€‚æ”¯æŒä»»åŠ¡ä¸åŒä¼˜å…ˆçº§ï¼Œå¯ä¸­æ–­ä¸æ¢å¤ï¼Œå¹¶ä¸”æ¢å¤åå¯ä»¥å¤ç”¨ä¹‹å‰çš„ä¸­é—´çŠ¶æ€ã€‚å…¶ä¸­æ¯ä¸ªä»»åŠ¡æ›´æ–°å•å…ƒä¸ºReact Elementå¯¹åº”çš„FiberèŠ‚ç‚¹ã€‚

## fä¸ºä»€ä¹ˆéœ€è¦fiber
React åœ¨ 16 ç‰ˆæœ¬ä¹‹å‰ï¼Œç”¨çš„æ˜¯`é€’å½’`çš„æ–¹å¼æ›´æ–°ç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒæ­¥çš„æ›´æ–°ï¼Œä¸€æ—¦å¼€å§‹å°±æ— æ³•ä¸­æ–­ï¼Œå¦‚æœè¿™ä¸€æ¬¡æ›´æ–°è¶…è¿‡äº†æµè§ˆå™¨ä¸€å¸§çš„æ—¶é—´ï¼Œä¸€èˆ¬æ˜¯ 16 msï¼Œç”¨æˆ·äº¤äº’å°±ä¼šå¡é¡¿ã€‚æ˜¾ç„¶è¿™ä¸æ»¡è¶³ React å¿«é€Ÿå“åº”çš„ç†å¿µï¼Œæ‰€ä»¥ 16 ç‰ˆæœ¬ä»¥å React æå‡ºäº†æ–°çš„ fiber æ¶æ„ï¼Œç”¨`å¼‚æ­¥å¯ä¸­æ–­çš„æ›´æ–°`æ›¿ä»£`åŒæ­¥çš„æ›´æ–°`ã€‚

## ffiberè§£å†³äº†å“ªäº›é—®é¢˜
1. è§£å†³äº† React15 åŒæ­¥æ›´æ–°é€ æˆçš„ç”¨æˆ·å¡é¡¿é—®é¢˜
2. æ”¯æŒé«˜ä¼˜å…ˆçº§ä»»åŠ¡æ’é˜Ÿä½ä¼˜å…ˆçº§ä»»åŠ¡
3. ä»»åŠ¡ä¸­æ–­ä»¥åå¯ä»¥æ¢å¤ï¼Œå¤ç”¨ä¹‹å‰çš„ä¸­é—´çŠ¶æ€

## fæ¶æ„ fReactçš„æ¶æ„ 16ä¹‹å‰æ˜¯ä»€ä¹ˆæ¶æ„ï¼Ÿ16ä¹‹åæ˜¯ä»€ä¹ˆæ¶æ„ï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆæ¼”å˜ï¼Ÿ
16 ä¹‹å‰ï¼ŒReact åªæœ‰ åè°ƒå™¨ å’Œ æ¸²æŸ“å™¨; 16 ä¹‹åï¼ŒReact æœ‰ è°ƒåº¦å™¨ã€åè°ƒå™¨ã€æ¸²æŸ“å™¨ã€‚
å„æ¨¡å—åŠŸèƒ½å¦‚ä¸‹:
* è°ƒåº¦å™¨: è°ƒåº¦ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œé«˜ä¼˜ä»»åŠ¡ä¼˜å…ˆè¿›å…¥åè°ƒå™¨ã€‚
* åè°ƒå™¨: è´Ÿè´£æ‰¾å‡ºå˜åŒ–çš„ç»„ä»¶ã€‚
* æ¸²æŸ“å™¨: è´Ÿè´£å°†å˜åŒ–çš„ç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚
### Scheduler
Scheduler æ˜¯ React å›¢é˜Ÿä¸º requestIdleCallback åšçš„ polyfill,  å› ä¸º rIC æœ‰ä»¥ä¸‹ç¼ºç‚¹:
1. æµè§ˆå™¨å…¼å®¹æ€§ä¸å¥½;
2. è§¦å‘é¢‘ç‡ä¸ç¨³å®šï¼Œå—å¾ˆå¤šå› ç´ å½±å“ã€‚æ¯”å¦‚å½“æˆ‘ä»¬çš„æµè§ˆå™¨åˆ‡æ¢tabåï¼Œä¹‹å‰tabæ³¨å†Œçš„requestIdleCallbackè§¦å‘çš„é¢‘ç‡ä¼šå˜å¾—å¾ˆä½ã€‚
### Reconciler
Reconciler ä»é€’å½’çš„æ–¹å¼ï¼Œå˜ä¸ºå¯ä¸­æ–­çš„å¾ªç¯æ–¹å¼ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šè°ƒç”¨ shouldYield(), å¦‚æœå½“å‰æœ‰å‰©ä½™æ—¶é—´æ‰ç»§ç»­ï¼Œæ²¡æœ‰å°±ä¸­æ–­å¾ªç¯ã€‚
* é‚£ä¹ˆReact16æ˜¯å¦‚ä½•è§£å†³ä¸­æ–­æ›´æ–°æ—¶DOMæ¸²æŸ“ä¸å®Œå…¨çš„é—®é¢˜å‘¢ï¼Ÿ
åœ¨React16ä¸­ï¼ŒReconcilerä¸Rendererä¸å†æ˜¯äº¤æ›¿å·¥ä½œã€‚å½“Schedulerå°†ä»»åŠ¡äº¤ç»™Reconcileråï¼ŒReconcilerä¼šä¸ºå˜åŒ–çš„è™šæ‹ŸDOMæ‰“ä¸Šä»£è¡¨å¢/åˆ /æ›´æ–°çš„æ ‡è®°ã€‚æ•´ä¸ªSchedulerä¸Reconcilerçš„å·¥ä½œéƒ½åœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œä¸å±•ç¤ºåˆ°è§†å›¾ä¸Šã€‚åªæœ‰å½“æ‰€æœ‰ç»„ä»¶éƒ½å®ŒæˆReconcilerçš„å·¥ä½œï¼Œæ‰ä¼šç»Ÿä¸€äº¤ç»™Rendererï¼Œæ¸²æŸ“è§†å›¾ã€‚
### Renderer
Rendereræ ¹æ®Reconcilerä¸ºè™šæ‹ŸDOMæ‰“çš„æ ‡è®°ï¼ŒåŒæ­¥æ‰§è¡Œå¯¹åº”çš„DOMæ“ä½œã€‚


# fè™šæ‹ŸDOM fvdom fVirtual DOM
è™šæ‹ŸDOMæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æè¿°äº†ä¸€ä¸ªUIç»“ç‚¹æ‰€å¯¹åº”çš„ä¸€äº›å¿…è¦ä¿¡æ¯ã€‚React çš„è™šæ‹ŸDOM å¯ä»¥ç†è§£ä¸º ReactElement å’Œ Fiberï¼Œå› ä¸º DIFF æ˜¯æ¯”è¾ƒè¿™ä¸¤è€…ã€‚
## ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹ŸDOM?
1. çœŸå®DOMçš„å±æ€§å¤ªå¤šäº†ï¼Œå¦‚æœç›´æ¥å¯¹çœŸå®DOMè¿›diffï¼Œæ¶ˆè€—æ€§èƒ½éå¸¸å¤§ã€‚
æ¯”å¦‚ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°å†™ document.createElement('div') å¾—åˆ°ä¸€ä¸ªç»“ç‚¹ï¼Œæ‰“å¼€è¿™ä¸ªç»“ç‚¹ï¼Œä¼šçœ‹åˆ°ä¸Šé¢çš„å±æ€§éå¸¸å¤šï¼Œå¦‚æœç›´æ¥åš diffï¼Œè¦å¯¹æ¯”è¿™ä¹ˆå¤šå±æ€§ï¼Œæ¶ˆè€—çš„æ€§èƒ½å°±éå¸¸å¤§ã€‚è€Œè™šæ‹Ÿ dom ä¸€èˆ¬å°±æ˜¯ { type: 'div', props: {} }, åªéœ€è¦å¯¹æ¯”è¿™å‡ ä¸ªå±æ€§ï¼Œæ€§èƒ½æŸè€—å¤§å¹…é™ä½ã€‚
2. å¯¹çœŸå®DOMè¿›è¡Œcurdå¾ˆæ¶ˆè€—æ€§èƒ½ï¼Œå¯ä»¥ç”¨è™šæ‹ŸDOMä»£æ›¿ã€‚
## è¯´ç”¨é€”
1. æ¸²æŸ“
2. æ¯”å¯¹ dom diff

# fDomDiff fDiff fReactDomDiff fdiffç®—æ³•
Diffç®—æ³•åœ¨æ¯”è¾ƒ`æ›´æ–°å‰è™šæ‹Ÿdomæ ‘`å’Œ`æ›´æ–°åè™šæ‹Ÿdomæ ‘`ï¼Œæ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„å·®å¼‚ã€‚React çš„ DOM DIFFï¼Œæ˜¯å¯¹æ¯”è€ fiber (current.child) å’Œ æ–°äº§ç”Ÿçš„ ReactElementï¼Œä»è€Œç”Ÿæˆ workInProgress.childã€‚
## è¯´ç”¨é€” fä¸ºä»€ä¹ˆéœ€è¦diffç®—æ³•ï¼Ÿ
ä¸ºäº†æé«˜æ¸²æŸ“æ€§èƒ½ï¼Œæ¯æ¬¡æ›´æ–°åº”è¯¥åªæ¸²æŸ“æœ‰å˜åŒ–çš„éƒ¨åˆ†ï¼Œè€Œ`diffç®—æ³•`çš„ç›®çš„å°±æ˜¯è¦æ‰¾å‡ºè¿™ä¸ªå˜åŒ–çš„éƒ¨åˆ†ã€‚
## åˆ¶å®šè§„åˆ™
ä¸ºäº†æé«˜å¯¹æ¯”çš„æ€§èƒ½ï¼ŒReact åœ¨ Dom Diff æ—¶åˆ¶å®šäº†ä¸‰ä¸ªè§„åˆ™:
1. åªæ¯”è¾ƒåŒçº§å…ƒç´ ï¼Œä¸è·¨å±‚çº§å¯¹æ¯”ã€‚
2. ä¸åŒç±»å‹å¯¹åº”ä¸åŒå…ƒç´ ï¼Œå¦‚ div å’Œ spanï¼ŒReact ä¸ä¼šå°è¯•å¤ç”¨ä¸åŒç±»å‹çš„å…ƒç´ ã€‚
3. é€šè¿‡ key æ¥æ ‡è¯†æ›´æ–°å‰åæ˜¯åŒä¸€ä¸ªç»“ç‚¹ã€‚
## æ—¶é—´å¤æ‚åº¦
æ—¶é—´å¤æ‚åº¦ O(N)ï¼ŒN æ˜¯è¿™ä¸€å±‚çš„ç»“ç‚¹ä¸ªæ•°ã€‚å› ä¸ºç®—æ³•æœ¬è´¨å°±æ˜¯éå†ä¸€æ¬¡è€ç»“ç‚¹ï¼Œéå†ä¸€æ¬¡æ–°ç»“ç‚¹ã€‚
è¿™ä¸ªé—®é¢˜å®é™…ä¸Šæ˜¯: åŒä¸€å±‚ä¸Šçš„ç¼–è¾‘è·ç¦»é—®é¢˜ã€‚
## å…·ä½“è¿‡ç¨‹  fDomDiffçš„è¿‡ç¨‹
React çš„ Dom Diff åˆ†ä¸º å•ç»“ç‚¹diff å’Œ å¤šç»“ç‚¹diffã€‚è¿™é‡Œçš„`å•ç»“ç‚¹`æˆ–`å¤šç»“ç‚¹`æŒ‡çš„æ˜¯æ–°ç»“ç‚¹ï¼Œæ–°ç»“ç‚¹åªæœ‰å•ä¸ªå°±æ˜¯å•ç»“ç‚¹diffï¼Œæ–°ç»“ç‚¹æœ‰å¤šä¸ªå°±æ˜¯å¤šç»“ç‚¹diffã€‚
### å•ç»“ç‚¹diff
å› ä¸ºåªæœ‰ä¸€ä¸ªæ–°ç»“ç‚¹ï¼Œæ‰€ä»¥é€šè¿‡ sibling æŒ‡é’ˆéå†è€ç»“ç‚¹å³å¯ï¼Œéå†è¿‡ç¨‹æ¯”è¾ƒæ–°è€ç»“ç‚¹çš„ type å’Œ key, æœ‰ä¸‰ç§æƒ…å†µ:
1. å¦‚æœ type å’Œ key éƒ½ç›¸åŒï¼Œè¯´æ˜è¿™ä¸ªè€ç»“ç‚¹å¯ä»¥å¤ç”¨ï¼Œæ ‡è®°å‰©ä½™çš„è€ç»“ç‚¹ä¸º`åˆ é™¤`ï¼Œè¿”å›è¿™ä¸ªå¯å¤ç”¨çš„è€ç»“ç‚¹ã€‚
2. å¦‚æœ key ç›¸åŒï¼Œä½†æ˜¯ type ä¸åŒï¼Œè‡ªå·±å’Œå¼Ÿå¼Ÿéƒ½æ ‡è®°ä¸ºåˆ é™¤ï¼Œè·³å‡ºéå†ï¼Œç›´æ¥æ–°å»ºä¸€ä¸ªç»“ç‚¹ï¼Œæ ‡è®°`æ’å…¥`ã€‚
3. å¦‚æœ key ä¸åŒï¼Œåˆ é™¤è¿™ä¸ªè€ç»“ç‚¹ï¼Œç»§ç»­éå†ä¸‹ä¸€ä¸ªè€ç»“ç‚¹ã€‚å¦‚æœéå†å®Œäº†è¿˜æ˜¯æ²¡æœ‰ç»“ç‚¹å¯å¤ç”¨ï¼Œé‚£å°±æ–°å»ºä¸€ä¸ªç»“ç‚¹ï¼Œæ ‡è®°`æ’å…¥`ã€‚
ğŸŒ°ä¾‹å­
æ¯”å¦‚: liA,liB,liC => liB
DIFFè¿‡ç¨‹å°±æ˜¯:  
liA => liB âŒ Deletion
liB => liB âœ… å¤ç”¨
liC        âŒ Deletion
### å¤šç»“ç‚¹diff
åˆ†ä¸ºå››æ­¥:
1. åŒæ—¶éå†æ–°è€ç»“ç‚¹ï¼Œå¤„ç†æ›´æ–° (æ–°ç»“ç‚¹ç”¨ç´¢å¼•:newIdx++, è€ç»“ç‚¹ç”¨æŒ‡é’ˆ: oldFiber = oldFiber.sibling)
2. å¦‚æœæœ‰å‰©ä½™çš„è€ç»“ç‚¹ï¼Œåˆ é™¤å¤šä½™çš„è€ç»“ç‚¹ (deleteRemainingChildren)
3. å¦‚æœæœ‰å‰©ä½™çš„æ–°ç»“ç‚¹ï¼Œå¢åŠ æ–°ç»“ç‚¹ 
4. å¤„ç†ç§»åŠ¨çš„æƒ…å†µ

* å¤„ç†ç§»åŠ¨çš„æƒ…å†µ
åœ¨ç¬¬ä¸€æ­¥å¤„ç†æ›´æ–°æ—¶ï¼Œå¯èƒ½å›  key ä¸åŒè€Œç›´æ¥è·³å‡ºå¾ªç¯ï¼Œè¿™æ ·ä¹Ÿè·³è¿‡äº†äºŒã€ä¸‰æ­¥ï¼Œç›´æ¥æ¥åˆ°ç¬¬å››æ­¥å¤„ç†ç§»åŠ¨ã€‚
å¤„ç†ç§»åŠ¨çš„æ­¥éª¤:
1. å°†å‰©ä½™çš„è€ç»“ç‚¹éƒ½æ”¾å…¥ä¸€ä¸ª Map ä¸­ï¼Œä»¥ oldFiber.key æˆ– oldFiber.index ä¸ºé”®ï¼Œä»¥ oldFiberæœ¬èº«ä¸ºå€¼ã€‚
2. è®¾ç½®ä¸€ä¸ª lastPlacedIndex å˜é‡ï¼Œä»£è¡¨æœ€åä¸€ä¸ªå¯å¤ç”¨çš„ç»“ç‚¹åœ¨ oldFibers ä¸­çš„ä½ç½®ç´¢å¼•ã€‚
3. éå†å‰©ä½™çš„æ–°ç»“ç‚¹ï¼Œé€šè¿‡ newChild.key æŸ¥æ‰¾ Map ä¸­æ˜¯å¦æœ‰å¯å¤ç”¨çš„è€ç»“ç‚¹ï¼Œå¯å¤ç”¨æ˜¯æŒ‡ key å’Œ type éƒ½ç›¸åŒ:
  
  * å¦‚æœæœ‰ï¼Œå¤ç”¨è€ç»“ç‚¹ï¼Œç„¶åæ¯”è¾ƒ lastPlacedIndex å’Œ oldFiber.indexï¼Œç”±äºç»“ç‚¹æ˜¯ä»å·¦å¾€å³éå†çš„ï¼Œåœ¨æ²¡æœ‰ç§»åŠ¨çš„æƒ…å†µä¸‹ï¼Œæ–°è€ index åº”è¯¥åŒæ­¥å˜å¤§ï¼Œ
    æœ¬æ¬¡å¤ç”¨çš„ oldFiber åº”è¯¥åœ¨æœ€åä¸€ä¸ªå¯å¤ç”¨çš„ oldFiber å³è¾¹ï¼Œä¹Ÿå°±æ˜¯è¯´ oldFiber.index åº”è¯¥ >= lastPlacedIndexï¼Œä½†æ˜¯æ¯”è¾ƒç»“æœæœ‰ä¸¤ç§æƒ…å†µ:

    - oldFiber.index < lastPlacedIndex, è¯´æ˜ `æœ¬æ¬¡å¤ç”¨çš„oldFiber` åœ¨`æœ€åä¸€ä¸ªå¯å¤ç”¨çš„oldFiber`å·¦è¾¹ï¼Œä¹Ÿå°±è¯´æ˜`æœ¬æ¬¡å¤ç”¨çš„oldFiber`åœ¨æ›´æ–°åå‘å³ç§»åŠ¨äº†ï¼Œæ‰€ä»¥ newFiber æ ‡è®°ä¸º`ç§»åŠ¨`(ç§»åŠ¨ä¹Ÿå°±æ˜¯Placementï¼Œåœ¨è€ç»“ç‚¹å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œæ’å…¥å°±æ˜¯ç§»åŠ¨), lastPlacedIndex ä¸å˜ã€‚

    - oldFiber.index >= lastPlacedIndex, è¯´æ˜ `æœ¬æ¬¡å¤ç”¨çš„oldFiber` åœ¨`æœ€åä¸€ä¸ªå¯å¤ç”¨çš„oldFiber`å³è¾¹ï¼Œè¿™è¯´æ˜ `æœ¬æ¬¡å¤ç”¨çš„oldFiber` æ²¡æœ‰ç§»åŠ¨, æœ¬æ¬¡å¤ç”¨çš„oldFiber`è¦ä½œä¸º`æœ€åä¸€ä¸ªå¯å¤ç”¨çš„oldFiber`ç»™ä¸‹ä¸€è½®å¾ªç¯çš„ oldFiber ä½œå‚ç…§ç‰©ï¼Œæ‰€ä»¥æ›´æ–° lastPlacedIndex ä¸º oldFiber.indexã€‚

  * å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–°çš„ fiberã€‚

### å¤šç»“ç‚¹diffçš„ä¾‹å­
liA,liB,liC,liD,liE,liF  => liA,liC,liE,liB,liG,liD
 0   1   2   3   4   5       0   1   2   3   4   5

1. åŒæ—¶éå†æ–°è€ç»“ç‚¹ï¼ŒliA=>liA å¤ç”¨ï¼ŒliB=>liC key ä¸åŒè·³å‡ºï¼Œè¿›å…¥`å¤„ç†ç§»åŠ¨`çš„ç¯èŠ‚ã€‚
2. å°†è€ liB ä»¥åçš„æ‰€æœ‰è€ç»“ç‚¹æ”¾å…¥ Map, éå†å‰©ä½™çš„æ–°ç»“ç‚¹ã€‚
3. lastPlacedIndex è®¾ç½®ä¸º0ï¼Œåœ¨ Map ä¸­æŸ¥æ‰¾æ–°ç»“ç‚¹ liCï¼Œå‘ç°æœ‰å¯ä»¥å¤ç”¨çš„ç»“ç‚¹ï¼Œäºæ˜¯å¤ç”¨ï¼ŒåŒæ—¶æ›´æ–° lastPlacedIndex ä¸º oldLiC.index = 2ã€‚
4. ç»§ç»­éå†æ–°ç»“ç‚¹ï¼ŒliE å¯å¤ç”¨ï¼Œè€Œä¸” oldLiE.index >= lastPlacedIndexï¼Œæ²¡æœ‰ç§»åŠ¨ï¼Œæ— éœ€æ ‡è®°ï¼Œæ›´æ–° lastPlacedIndex ä¸º oldLiE.index = 4ã€‚
5. ç»§ç»­éå†æ–°ç»“ç‚¹ï¼ŒliB å¯å¤ç”¨ï¼Œä½†æ­¤æ—¶ oldLiB.index < lastPlacedIndexï¼Œè¯´æ˜ liB ç§»åŠ¨äº†ï¼Œæ ‡è®° `Placement`ã€‚
6. ç»§ç»­éå†æ–°ç»“ç‚¹ï¼ŒliG ä¸åœ¨è€ç»“ç‚¹ä¸­ï¼Œæ ‡è®°`Placement`ã€‚
7. ç»§ç»­éå†æ–°ç»“ç‚¹ï¼ŒliD å¯å¤ç”¨ï¼ŒoldLiD.index < lastPlacedIndex, æ ‡è®° `Placement`ã€‚ 

                 A        B       C              D                 E               F   
                 A        C       E              B                 G               D
                å¤ç”¨     å¤ç”¨     å¤ç”¨         å¤ç”¨(ç§»åŠ¨)          ä¸å¯å¤ç”¨(æ’å…¥)    å¤ç”¨(ç§»åŠ¨)
lastPlaceIndex   0        2       4              4                 4               4
                >=       >=      >=    oldIndex < lastPlacedIndex       oldIndex < lastPlacedIndex

### èµ„æ–™
å‰ç«¯ä¸é»‘å®¢å®‰å…¨  01:24:52
Electron+æ¸¸æˆå¼•æ“+å‰ç«¯é»‘å®¢ä¸å®‰å…¨ 00:10:41  Dom Diff: vue vs react


==============================  fWebpack  ==============================
# fwebpackç”Ÿå‘½å‘¨æœŸ få·¥ä½œæµç¨‹ fæ„å»ºæµç¨‹
1. åˆå§‹åŒ–å‚æ•°
ä»é…ç½®æ–‡ä»¶å’Œ shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°ã€‚
2. å¼€å§‹ç¼–è¯‘
ç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹ç¼–è¯‘ã€‚
3. å¯»æ‰¾å…¥å£
æ ¹æ® entry æ‰¾åˆ°æ‰€æœ‰ å…¥å£æ–‡ä»¶ã€‚
4. ç¼–è¯‘æ¨¡å—
ä»æ¯ä¸ªå…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†ã€‚
5. è¾“å‡ºèµ„æº
æ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ chunkï¼Œå†æŠŠæ¯ä¸ª chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼šã€‚
6. å†™å…¥ç£ç›˜
åœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚
åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼Œwebapck ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œä»è€Œå¯ä»¥æ”¹å˜ webpack çš„è¿è¡Œç»“æœã€‚

# fTreeShaking fæ‘‡æ ‘ä¼˜åŒ–
Tree-Shaking æ˜¯ä¸€ç§åŸºäº ES Module è§„èŒƒçš„ æ— ç”¨ä»£ç æ¸…é™¤(Dead Code Elimination) æŠ€æœ¯ï¼Œå®ƒä¼šåœ¨è¿è¡Œè¿‡ç¨‹ä¸­é™æ€åˆ†ææ¨¡å—ä¹‹é—´çš„å¯¼å…¥å¯¼å‡ºï¼Œç¡®å®š ESM æ¨¡å—ä¸­å“ªäº›å¯¼å‡ºå€¼æœªæ›¾å…¶å®ƒæ¨¡å—ä½¿ç”¨ï¼Œå¹¶å°†å…¶åˆ é™¤ï¼Œä»¥æ­¤å®ç°æ‰“åŒ…äº§ç‰©çš„ä¼˜åŒ–ã€‚
## få¼€å¯TreeShaking  fåœ¨ webpack ä¸­å¼€å¯ TreeShaking
1. ä½¿ç”¨ ESM è§„èŒƒç¼–å†™æ¨¡å—ä»£ç ã€‚
2. é…ç½® optimization.usedExports ä¸º trueï¼Œå¯åŠ¨æ ‡è®°åŠŸèƒ½ã€‚
3. å¯åŠ¨ä»£ç ä¼˜åŒ–åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼çš„ä»»æ„ä¸€ç§å®ç°:
  - é…ç½® mode = production
  - é…ç½® optimization.minimize = true
  - æä¾› optimization.minimizer æ•°ç»„
ä¾‹å¦‚, åœ¨ webpack.config.js ä¸­:
```js
module.exports = {
  entry: "./src/index",
  mode: "production",
  devtool: false,
  optimization: {
    usedExports: true,
  },
};
```
## fES6æ¨¡å—ç‰¹ç‚¹ fESMè§„èŒƒ
1. åªèƒ½ä½œä¸ºæ¨¡å—é¡¶å±‚çš„è¯­å¥å‡ºç°ã€‚
2. å¯¼å…¥å¯¼å‡ºçš„æ¨¡å—ååªèƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚
3. å¯¼å…¥çš„å€¼æ˜¯ä¸å¯å˜çš„ã€‚
ä»¥ä¸Šä¸‰ç‚¹ï¼Œå†³å®šäº† ESM æ˜¯å®Œå…¨é™æ€çš„ï¼Œè·Ÿè¿è¡Œæ—¶æ— å…³ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ç¼–è¯‘æ—¶ï¼Œä»ä»£ç å­—é¢é‡ä¸­å°±æ¨æ–­å‡ºå“ªäº›æ¨¡å—å€¼æœªè¢«ä½¿ç”¨ï¼Œè¿™æ˜¯å®ç° Tree Shaking æŠ€æœ¯çš„å¿…è¦æ¡ä»¶ã€‚
```js
// index.js ä¸»æ¨¡å—
import {bar} from './bar';
console.log(bar);  // ä»…ä½¿ç”¨äº† bar, æ²¡æœ‰ä½¿ç”¨ foo
// bar.js æ¨¡å—
export const bar = 'bar';
export const foo = 'foo';   // foo æœªè¢«ä½¿ç”¨, ä¼šè¢«è§†ä½œæ— ç”¨ä»£ç è€Œåˆ é™¤ã€‚
```
## fåŸç† fTreeShakingåŸç†
Webpack ä¸­ï¼ŒTree-shaking åˆ†ä¸ºä¸¤æ­¥:
1. ç¬¬ä¸€æ­¥ã€å…ˆæ ‡è®°å‡ºæ¨¡å—å¯¼å‡ºå€¼ä¸­å“ªäº›æ²¡æœ‰è¢«ç”¨è¿‡ã€‚
2. ç¬¬äºŒæ­¥ã€ä½¿ç”¨ Terseræˆ–UglifyJS ç­‰ DCEå·¥å…· åˆ æ‰è¿™äº›æ²¡è¢«ç”¨åˆ°çš„å¯¼å‡ºè¯­å¥ã€‚
æ ‡è®°è¿‡ç¨‹å¤§è‡´å¯åˆ’åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤:
  - Make é˜¶æ®µï¼Œæ”¶é›†æ¨¡å—å¯¼å‡ºå˜é‡å¹¶è®°å½•åˆ°æ¨¡å—ä¾èµ–å…³ç³»å›¾ ModuleGraph å˜é‡ä¸­ã€‚
  - Seal é˜¶æ®µï¼Œéå† ModuleGraph æ ‡è®°æ¨¡å—å¯¼å‡ºå˜é‡æœ‰æ²¡æœ‰è¢«ä½¿ç”¨ã€‚
  - ç”Ÿæˆäº§ç‰©æ—¶ï¼Œè‹¥å˜é‡æ²¡æœ‰è¢«å…¶å®ƒæ¨¡å—ä½¿ç”¨åˆ™åˆ é™¤å¯¹åº”çš„å¯¼å‡ºè¯­å¥ã€‚

ğŸŒ°ä¾‹å­
```js
{
  // bar æ¨¡å—
  "./src/bar.js":  ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    __webpack_require__.d(__webpack_exports__, {
      "bar": () => (/* binding */ bar)
      // è¿™é‡Œå°±æ²¡æœ‰å¯¼å‡º fooï¼Œå› ä¸ºæ ¹æœ¬æ²¡ç”¨åˆ°ã€‚
      // åé¢ Terser æ’ä»¶çš„ DCE åŠŸèƒ½ï¼Œä¼šæŠŠ const foo = 'foo' æ‘‡æ‰ã€‚
    });
    /* unused harmony export foo */
    const bar = 'bar';
    const foo = 'foo';
  })
}
```

# fç¼“å­˜ fwebpackç¼“å­˜
1. cache-loader
2. hard-source-webpack-plugin
3. babel-loader
## hard-source-webpack-plugin
æ¨¡å—è§£æçš„é˜¶æ®µï¼Œç”¨äºä¸­é—´çš„ç¼“å­˜ã€‚
ç¬¬ä¸€æ¬¡æ˜¯æ­£å¸¸çš„æ„å»ºé€Ÿåº¦ï¼Œä½†æ˜¯ä¼šä¿å­˜ç¼“å­˜æ•°æ®åˆ° xxx é‡Œã€‚
ç¬¬äºŒæ¬¡ä½¿ç”¨ç¼“å­˜æ¥æ„å»ºï¼Œé€Ÿåº¦æå‡ã€‚
## babel-loader
è¿è¡Œä»¥åï¼Œä¼šå¢åŠ  node_modules/.cache/babel-loader è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç¼“å­˜çš„æ–‡ä»¶
```js
{
  loader: 'babel-loader',
  options: {
    cacheDirectory: true // å¼€å¯ç¼“å­˜
  }
}
```

# fçƒ­æ›´æ–°ğŸ”¥ fdevServer
å®‰è£… webpack-dev-server, ç„¶ååœ¨å¼€å‘ç¯å¢ƒä¸‹é…ç½®:
```js
devServer: {
  contentBase: join(__dirname, '../dist'),
  hot: true,
  port: 3000
}
```

## fç³»ç»Ÿçº§é€šçŸ¥
æŒ‰ä¸‹ Ctrl+S, æ— éœ€æŸ¥çœ‹ terminal, ç³»ç»Ÿä¼šé€šçŸ¥ä½ æˆåŠŸ/å¤±è´¥ã€‚åªéœ€å®‰è£… webpack-build-notifier, é…ç½®æ’ä»¶:
```js
plugins: [
  new WebpackBuildNotifierPlugin({
    title: "My Webpack Project",
    logo: path.resolve("./img/favicon.png"),
    suppressSuccess: true,
  })
]
```
