/**
 * æ‰‹åŠ¨æ”¹å†™å †é¢˜ç›®ç»ƒä¹ 
 *
 * ç»™å®šä¸€ä¸ªæ•´å‹æ•°ç»„ int[] arr å’Œä¸€ä¸ªå¸ƒå°”ç±»å‹æ•°ç»„ boolean[] op, ä¸¤ä¸ªæ•°ç»„ä¸€å®šç­‰é•¿ï¼Œå‡è®¾é•¿åº¦ä¸ºNï¼Œarr[i]è¡¨ç¤ºå®¢æˆ·ç¼–å·ï¼Œop[i]è¡¨ç¤ºå®¢æˆ·æ“ä½œã€‚
 * arr = [3, 3, 1, 2, 1, 2, 5â€¦]
 * op  = [T, T, T, T, F, T, Fâ€¦]
 * ä¾æ¬¡è¡¨ç¤ºï¼š
 * 3ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“ï¼Œ
 * 3ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“ï¼Œ
 * 1ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“ï¼Œ
 * 2ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“ï¼Œ
 * 1ç”¨æˆ·é€€è´§äº†ä¸€ä»¶å•†å“ï¼Œ
 * 2ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“ï¼Œ
 * 5ç”¨æˆ·é€€è´§äº†ä¸€ä»¶å•†å“â€¦
 *
 * ä¸€å¯¹ arr[i] å’Œ op[i] å°±ä»£è¡¨ä¸€ä¸ªäº‹ä»¶:
 * ç”¨æˆ·å·ä¸º arr[i]ï¼Œop[i] == T å°±ä»£è¡¨è¿™ä¸ªç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“, op[i] == F å°±ä»£è¡¨è¿™ä¸ªç”¨æˆ·é€€è´§äº†ä¸€ä»¶å•†å“ã€‚
 * ç°åœ¨ä½ ä½œä¸ºç”µå•†å¹³å°è´Ÿè´£äººï¼Œä½ æƒ³åœ¨æ¯ä¸€ä¸ªäº‹ä»¶åˆ°æ¥çš„æ—¶å€™ï¼Œéƒ½ç»™è´­ä¹°æ¬¡æ•°æœ€å¤šçš„å‰ K åç”¨æˆ·é¢å¥–ã€‚
 * æ‰€ä»¥æ¯ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œä½ éƒ½éœ€è¦ä¸€ä¸ªå¾—å¥–åå•ï¼ˆå¾—å¥–åŒºï¼‰ã€‚
 *
 * å¾—å¥–ç³»ç»Ÿçš„è§„åˆ™ï¼š
 * 1ï¼Œå¦‚æœæŸä¸ªç”¨æˆ·è´­ä¹°å•†å“æ•°ä¸º0ï¼Œä½†æ˜¯åˆå‘ç”Ÿäº†é€€è´§äº‹ä»¶ï¼Œåˆ™è®¤ä¸ºè¯¥äº‹ä»¶æ— æ•ˆï¼Œå¾—å¥–åå•å’Œä¸Šä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåä¸€è‡´ï¼Œä¾‹å­ä¸­çš„5ç”¨æˆ·ã€‚
 * 2ï¼ŒæŸç”¨æˆ·å‘ç”Ÿè´­ä¹°å•†å“äº‹ä»¶ï¼Œè´­ä¹°å•†å“æ•°+1ï¼Œå‘ç”Ÿé€€è´§äº‹ä»¶ï¼Œè´­ä¹°å•†å“æ•°-1ã€‚
 * 3ï¼Œæ¯æ¬¡éƒ½æ˜¯æœ€å¤šKä¸ªç”¨æˆ·å¾—å¥–ï¼ŒKä¹Ÿä¸ºä¼ å…¥çš„å‚æ•°ã€‚å¦‚æœæ ¹æ®å…¨éƒ¨è§„åˆ™ï¼Œå¾—å¥–äººæ•°ç¡®å®ä¸å¤ŸKä¸ªï¼Œé‚£å°±ä»¥ä¸å¤Ÿçš„æƒ…å†µè¾“å‡ºç»“æœã€‚
 * 4ï¼Œå¾—å¥–ç³»ç»Ÿåˆ†ä¸ºå¾—å¥–åŒºå’Œå€™é€‰åŒºï¼Œä»»ä½•ç”¨æˆ·åªè¦è´­ä¹°æ•°>0ï¼Œä¸€å®šåœ¨è¿™ä¸¤ä¸ªåŒºåŸŸä¸­çš„ä¸€ä¸ªã€‚
 * 5ï¼Œè´­ä¹°æ•°æœ€å¤§çš„å‰Kåç”¨æˆ·è¿›å…¥å¾—å¥–åŒºï¼Œåœ¨æœ€åˆæ—¶å¦‚æœå¾—å¥–åŒºæ²¡æœ‰åˆ°è¾¾Kä¸ªç”¨æˆ·ï¼Œé‚£ä¹ˆæ–°æ¥çš„ç”¨æˆ·ç›´æ¥è¿›å…¥å¾—å¥–åŒº
 * 6ï¼Œå¦‚æœè´­ä¹°æ•°ä¸è¶³ä»¥è¿›å…¥å¾—å¥–åŒºçš„ç”¨æˆ·ï¼Œè¿›å…¥å€™é€‰åŒº
 * 7ï¼Œå¦‚æœå€™é€‰åŒºè´­ä¹°æ•°æœ€å¤šçš„ç”¨æˆ·ï¼Œå·²ç»è¶³ä»¥è¿›å…¥å¾—å¥–åŒºï¼Œè¯¥ç”¨æˆ·å°±ä¼šæ›¿æ¢å¾—å¥–åŒºä¸­è´­ä¹°æ•°æœ€å°‘çš„ç”¨æˆ·ï¼ˆå¤§äºæ‰èƒ½æ›¿æ¢ï¼‰ï¼Œ
 * å¦‚æœå¾—å¥–åŒºä¸­è´­ä¹°æ•°æœ€å°‘çš„ç”¨æˆ·æœ‰å¤šä¸ªï¼Œå°±æ›¿æ¢æœ€æ—©è¿›å…¥å¾—å¥–åŒºçš„ç”¨æˆ·
 * å¦‚æœå€™é€‰åŒºä¸­è´­ä¹°æ•°æœ€å¤šçš„ç”¨æˆ·æœ‰å¤šä¸ªï¼Œæœºä¼šä¼šç»™æœ€æ—©è¿›å…¥å€™é€‰åŒºçš„ç”¨æˆ·
 * 8ï¼Œå€™é€‰åŒºå’Œå¾—å¥–åŒºæ˜¯ä¸¤å¥—æ—¶é—´ï¼Œå› ç”¨æˆ·åªä¼šåœ¨å…¶ä¸­ä¸€ä¸ªåŒºåŸŸï¼Œæ‰€ä»¥åªä¼šæœ‰ä¸€ä¸ªåŒºåŸŸçš„æ—¶é—´ï¼Œå¦ä¸€ä¸ªæ²¡æœ‰ã€‚
 * ä»å¾—å¥–åŒºå‡ºæ¥è¿›å…¥å€™é€‰åŒºçš„ç”¨æˆ·ï¼Œå¾—å¥–åŒºæ—¶é—´åˆ é™¤ï¼Œè¿›å…¥å€™é€‰åŒºçš„æ—¶é—´å°±æ˜¯å½“å‰äº‹ä»¶çš„æ—¶é—´ï¼ˆå¯ä»¥ç†è§£ä¸ºarr[i]å’Œop[i]ä¸­çš„iï¼‰
 * ä»å€™é€‰åŒºå‡ºæ¥è¿›å…¥å¾—å¥–åŒºçš„ç”¨æˆ·ï¼Œå€™é€‰åŒºæ—¶é—´åˆ é™¤ï¼Œè¿›å…¥å¾—å¥–åŒºçš„æ—¶é—´å°±æ˜¯å½“å‰äº‹ä»¶çš„æ—¶é—´ï¼ˆå¯ä»¥ç†è§£ä¸ºarr[i]å’Œop[i]ä¸­çš„iï¼‰
 * 9ï¼Œå¦‚æœæŸç”¨æˆ·è´­ä¹°æ•°==0ï¼Œä¸ç®¡åœ¨å“ªä¸ªåŒºåŸŸéƒ½ç¦»å¼€ï¼ŒåŒºåŸŸæ—¶é—´åˆ é™¤ï¼Œ
 * ç¦»å¼€æ˜¯æŒ‡å½»åº•ç¦»å¼€ï¼Œå“ªä¸ªåŒºåŸŸä¹Ÿä¸ä¼šæ‰¾åˆ°è¯¥ç”¨æˆ·
 * å¦‚æœä¸‹æ¬¡è¯¥ç”¨æˆ·åˆå‘ç”Ÿè´­ä¹°è¡Œä¸ºï¼Œäº§ç”Ÿ>0çš„è´­ä¹°æ•°ï¼Œä¼šå†æ¬¡æ ¹æ®ä¹‹å‰è§„åˆ™å›åˆ°æŸä¸ªåŒºåŸŸä¸­ï¼Œè¿›å…¥åŒºåŸŸçš„æ—¶é—´é‡è®°
 *
 * éœ€è¦çš„ç»“æœ:
 * è¯·éå†arræ•°ç»„å’Œopæ•°ç»„ï¼Œéå†æ¯ä¸€æ­¥è¾“å‡ºä¸€ä¸ªå¾—å¥–åå•ã€‚
 */

const HeapGreater = require('./HeapGreater');

class WhoIsYourDaddy {
  constructor(limit) {
    this.customers = new Map();  // <number, Customer> <ç”¨æˆ·id,ç”¨æˆ·>
    this.candHeap = new HeapGreater(compareCands);  // å€™é€‰åŒºåŠ å¼ºå † - å¤§æ ¹å †ï¼Œè° buy æœ€å¤§è°æ’ä¸Šé¢
    this.daddyHeap = new HeapGreater(compareDaddy);  // å¾—å¥–åŒºåŠ å¼ºå † - å°æ ¹å †ï¼Œè° buy æœ€å°è°æ’ä¸Šé¢
    this.daddyLimit = limit;  // å¾—å¥–åŒºçš„å¤§å°ï¼Œtop K é—®é¢˜
  }
  
  // `idä»£è¡¨çš„ç”¨æˆ·`åœ¨ time çš„æ—¶åˆ»å‘ç”Ÿäº† buyOrRefund çš„æ“ä½œ
  operate(time, id, buyOrRefund) {
    if (!buyOrRefund && !this.customers.has(id)) {
      // é€€è´§å¹¶ä¸”ç”¨æˆ·è¡¨é‡Œæ²¡æœ‰è¿™ä¸ªç”¨æˆ·ï¼Œè¿™ä¸ªäº‹å°±ç­‰åŒäºæ²¡å‘ç”Ÿ
      return;
    }
    if (!this.customers.has(id)) {
      // å¦‚æœæ²¡æœ‰è¿™ä¸ªç”¨æˆ·ï¼Œé‚£å°±å®ä¾‹åŒ–ä¸€ä¸ª
      this.customers.set(id, new Customer(id, 0, 0));
    }
    // æ‹¿å‡º id è¿™ä¸ªç”¨æˆ·
    const c = this.customers.get(id);
    // æ ¹æ®æ“ä½œè°ƒæ•´ c.buy
    if (buyOrRefund) {
      c.buy++;
    } else {
      c.buy--;
    }
    // å¦‚æœå½“å‰ç”¨æˆ·è´­ä¹°æ•°æ¸…åˆ°é›¶äº†ï¼Œä»è¡¨ä¸­ç§»é™¤
    if (c.buy === 0) {
      this.customers.delete(id);
    }
    // ä¸Šé¢éƒ½æ˜¯ O(1) çš„ï¼Œçœ‹ä¸å‡ºæ¥å¤šé«˜æ•ˆï¼Œä¸‹é¢å°±å¼€å§‹é«˜æ•ˆäº†ğŸ‘‡   O(logN)
    // push pop remove resign éƒ½æ˜¯ O(logN) çš„è¿‡ç¨‹ï¼Œéå¸¸é«˜æ•ˆğŸ”¥
    if (!this.candHeap.contains(c) && !this.daddyHeap.contains(c)) {
      // å€™é€‰åŒºå’Œå¾—å¥–åŒºéƒ½ä¸åŒ…å«å½“å‰ç”¨æˆ·
      if (this.daddyHeap.size < this.daddyLimit) {
        // å¾—å¥–åŒºè¿˜æœ‰ç©ºä½ï¼Œç›´æ¥æŠŠç”¨æˆ·åŠ è¿›æ¥
        c.enterTime = time;
        this.daddyHeap.push(c);
      } else {
        // å¾—å¥–åŒºæ»¡äº†ï¼ŒæŠŠç”¨æˆ·åŠ å…¥å€™é€‰åŒº
        c.enterTime = time;
        this.candHeap.push(c);
      }
    }
    // å½“å‰ç”¨æˆ·åœ¨ä¸¤ä¸ªåŒºçš„å…¶ä¸­ä¸€ä¸ª
    else if (this.candHeap.contains(c)) {
      // åœ¨å€™é€‰åŒº
      if (c.buy === 0) {
        // å¦‚æœè´­ä¹°æ•°ä¸º0, ç§»é™¤
        this.candHeap.remove(c);
      } else {
        // å¦‚æœè´­ä¹°æ•°ä¸ä¸º0ï¼Œè¯´æ˜ buy å˜åŒ–äº†ï¼Œæ ¹æ®è°ƒæ•´ç­–ç•¥æ¥è°ƒæ•´å †ã€‚
        this.candHeap.resign(c);
      }
    }
    else {
      // åœ¨å¾—å¥–åŒºï¼ŒåŒæ ·çš„é“ç†
      if (c.buy === 0) {
        this.daddyHeap.remove(c);
      } else {
        this.daddyHeap.resign(c);
      }
    }
    // çœ‹çœ‹æœ‰æ²¡æœ‰çˆ¹ç§»åŠ¨åˆ°å¾—å¥–åŒº
    this.daddyMove(time);
  }
  
  // çœ‹çœ‹æœ‰æ²¡æœ‰çˆ¹ç§»åŠ¨åˆ°å¾—å¥–åŒº
  daddyMove(time) {
    if (this.candHeap.isEmpty()) {
      // å¦‚æœå€™é€‰åŒºä¸ºç©ºï¼Œé‚£å°±å•¥ä¹Ÿä¸å¹²
      return;
    }
    if (this.daddyHeap.size < this.daddyLimit) {
      // å¦‚æœå¾—å¥–åŒºè¿˜æœ‰ç©ºä½
      // å¼¹å‡ºæœ€é¡¶çš„å€™é€‰åŒºç”¨æˆ·
      const p = this.candHeap.pop();
      // æ›´æ–°è¿›å…¥æ—¶é—´
      p.enterTime = time;
      // å€™é€‰åŒºçš„æœ€ä¼˜ç”¨æˆ·ï¼Œè¿›å…¥å¾—å¥–åŒº
      this.daddyHeap.push(p);
    } else {
      // å€™é€‰åŒºæœ‰ç”¨æˆ·ï¼Œå¾—å¥–åŒºä¹Ÿæ»¡äº†ï¼Œçœ‹çœ‹`å€™é€‰åŒºçš„ç”¨æˆ·`å¤Ÿä¸å¤Ÿèµ„æ ¼æ›¿æ¢`å¾—å¥–åŒºçš„ç”¨æˆ·`
      if (this.candHeap.peek().buy > this.daddyHeap.peek().buy) {
        // åˆ†åˆ«æ‹¿å‡ºæ¥ 2 ä¸ªæœ€ä¼˜çš„
        const oldDaddy = this.daddyHeap.pop();
        const newDaddy = this.candHeap.pop();
        // æ›´æ–° enterTime
        oldDaddy.enterTime = time;
        newDaddy.enterTime = time;
        // æ›¿æ¢
        this.daddyHeap.push(newDaddy);
        this.candHeap.push(oldDaddy);
      }
    }
  }
  
  // è·å–æ‰€æœ‰å¾—å¥–çš„ç”¨æˆ·id
  getDaddies() {
    const customers = this.daddyHeap.getAllElements();  // Customer[]
    const ids = [];  // number[]  ç”¨æˆ·idåˆ—è¡¨
    for (let i = 0, len = customers.length; i < len; i++) {
      ids.push(customers[i].id);
    }
    return ids;
  }
}

// æ–¹æ³•äºŒ ä½¿ç”¨åŠ å¼ºå †
// æ—¶é—´å¤æ‚åº¦ O(N*(logN+logK+K))
/**
 * å‰ K ä¸ªç”¨æˆ·æ˜¯è·å¥–çš„ç”¨æˆ·ï¼Œè¿”å›ä»–ä»¬çš„ id åˆ—è¡¨ã€‚
 *
 * @param {number[]} arr ç”¨æˆ·idåå•
 * @param {boolean[]} ops æ“ä½œæ•°ç»„
 * @param {number} k å‰Kåç”¨æˆ·
 * @return {Array<Array<number>>} list å¾—å¥–çš„ç”¨æˆ·idåå•
 */
function topK(arr, ops, k) {
  const ans = [];  // Array<Array<number>>
  const whoIsYourDaddy = new WhoIsYourDaddy(k);
  // O(N*(logN+logK+K))
  // Nä¸ªæ—¶åˆ»ï¼ŒlogNå€™é€‰å †ï¼ŒlogKå¾—å¥–å †ï¼ŒKå¾—å¥–çš„é“¾
  for (let i = 0, len = arr.length; i < len; i++) {
    // i å·æ—¶é—´ç‚¹ arr[i] è¿™ä¸ªç”¨æˆ·è¿›æ¥ï¼Œå‘ç”Ÿäº† ops[i]
    whoIsYourDaddy.operate(i, arr[i], ops[i]);
    // æŠŠæ¯ä¸€æ­¥çš„å¾—å¥–ç”¨æˆ·idåˆ—è¡¨åŠ å…¥ansã€‚
    ans.push(whoIsYourDaddy.getDaddies());
  }
  return ans;
}

// ç”¨æˆ·
class Customer {
  constructor(id, buy, enterTime) {
    this.id = id;  // ç”¨æˆ·id
    this.buy = buy;  // è´­ä¹°å•†å“æ•°
    this.enterTime = enterTime;  // è¿›å…¥å¾—å¥–åŒº/å€™é€‰åŒºçš„æ—¶é—´
  }
}

// æ–¹æ³•ä¸€ã€æš´åŠ›è§£
// å¹²å®Œæ‰€æœ‰çš„äº‹ï¼Œæ¨¡æ‹Ÿï¼Œä¸ä¼˜åŒ–
// @return Array<Array<number>> è¿”å›çš„æ˜¯æ¯æ¬¡
function compare(arr, ops, k) {
  const map = new Map();  // <number, Customer> <ç”¨æˆ·id,ç”¨æˆ·å®ä¾‹>
  const cands = [];  // Customer[] å€™é€‰åŒº
  const daddy = [];  // Customer[] å¾—å¥–åŒº
  const ans = [];    // Array<Array<number>>  éå†æ¯ä¸€æ­¥éƒ½è¦è¿”å›ä¸€æ¬¡ topK, ç»„æˆä¸€ä¸ª topK æ•°ç»„
  
  // O(N^2*logX)  æ¯æ¬¡äº‹ä»¶åˆ°æ¥æ—¶ï¼Œéƒ½è¦æ’ä¸ªåºï¼Œè¿˜è¦æ‹‰ä¸ªKçš„é“¾è¡¨ç­‰ã€‚ã€‚
  for (let i = 0, len = arr.length; i < len; i++) {
    // éå†`ç”¨æˆ·å’Œæ“ä½œ`åˆ—è¡¨
    const id = arr[i];  // ç”¨æˆ·id
    const buyOrRefund = ops[i];   // ä¹°/é€€è´§
    if (!buyOrRefund && !map.has(id)) {
      // æ­¤æ—¶æ˜¯é€€è´§è¡Œä¸º å¹¶ä¸” æ²¡æœ‰è¿™ä¸ªç”¨æˆ·, ç­‰åŒäºäº‹ä»¶æ²¡å‘ç”Ÿ, ans ç»´æŒä¸Šä¸€æ¬¡çš„ç»“æœå³å¯ã€‚(å¾—å¥–ç³»ç»Ÿçš„è§„åˆ™1)
      ans.push(getCurAns(daddy));
      // ç»§ç»­åˆ°ä¸‹ä¸€ä¸ªç”¨æˆ·å’Œç”¨æˆ·çš„æ“ä½œ
      continue;
    }
    // 1. ç”¨æˆ·ä¹‹å‰è´­ä¹°æ•°===0, æ­¤æ—¶ä¹°è´§
    // 2. ç”¨æˆ·ä¹‹å‰è´­ä¹°æ•°>0, æ­¤æ—¶ä¹°è´§
    // 3. ç”¨æˆ·ä¹‹å‰è´­ä¹°æ•°>0, æ­¤æ—¶é€€è´§
    if (!map.has(id)) {
      // ç”¨æˆ·æ²¡æœ‰åœ¨è®°å½•è¡¨é‡Œï¼Œè¯´æ˜: `ç”¨æˆ·ä¹‹å‰è´­ä¹°æ•°===0, æ­¤æ—¶ä¹°è´§`
      // buy å’Œ enterTime éƒ½è®¾ç½®ä¸º 0, åœ¨ä¸‹é¢å…·ä½“è€ƒå¯Ÿ
      map.set(id, new Customer(id, 0, 0));
    }
    // æ‹¿å‡ºå½“å‰ç”¨æˆ·
    const c = map.get(id);
    // ä¹°/å–å•†å“
    if (buyOrRefund) {
      c.buy++;
    } else {
      c.buy--;
    }
    if (c.buy === 0) {
      // å¦‚æœè´­ä¹°å•†å“å·²ç»é™åˆ°0ï¼Œè®°å½•è¡¨ç§»é™¤å½“å‰ç”¨æˆ·
      map.delete(id);
    }
    if (!cands.includes(c) && !daddy.includes(c)) {
      // å³æ²¡æœ‰åœ¨`å€™é€‰åŒº`ä¹Ÿæ²¡æœ‰åœ¨`å¾—å¥–åŒº`, è¯´æ˜ç”¨æˆ·æ˜¯æ–°è¿›æ¥çš„å¹¶ä¸”å‘ç”Ÿäº†`è´­ä¹°`
      if (daddy.length < k) {
        // å¾—å¥–åŒºè¿˜æ²¡åˆ°è¾¾ k, c è¿›å…¥å¾—å¥–åŒº
        c.enterTime = i;
        daddy.push(c);
      } else {
        // å¾—å¥–åŒºæ»¡äº†ï¼Œc è¿›å…¥å€™é€‰åŒº
        c.enterTime = i;
        cands.push(c);
      }
    }
    // æ¸…æ‰`å¾—å¥–åŒº`å’Œ`å€™é€‰åŒº`çš„è´­ä¹°æ•°ä¸º0çš„ç”¨æˆ·
    clearZeroBuy(daddy);
    clearZeroBuy(cands);
    // æŒ‰å„è‡ªçš„è§„åˆ™æ’åº
    cands.sort(compareCands);
    daddy.sort(compareDaddy);
    // å°†å€™é€‰åŒºä¸­èƒœå‡ºçš„ç”¨æˆ·ç§»åŠ¨åˆ°å¾—å¥–åŒº
    move(cands, daddy, k, i);
    // å¾—åˆ°æ‰€æœ‰ç”¨æˆ·id
    ans.push(getCurAns(daddy));
  }
  
  return ans;
}

// è¿”å›å¾—å¥–çš„æ‰€æœ‰ç”¨æˆ·id
function getCurAns(daddy) {
  const ids = [];
  for (let i = 0, len = daddy.length; i < len; i++) {
    ids.push(daddy[i].id);
  }
  return ids;
}

// æ¸…ç©ºä¸€ä¸ªåˆ—è¡¨ä¸­è´­ä¹°æ•°ä¸º0çš„ç”¨æˆ·
function clearZeroBuy(arr) {
  const noZero = [];
  for (let i = 0, len = arr.length; i < len; i++) {
    const c = arr[i];
    if (c.buy !== 0) {
      noZero.push(c);
    }
  }
  while (arr.length > 0) {
    arr.pop();
  }
  for (let i = 0, len = noZero.length; i < len; i++) {
    arr.push(noZero[i]);
  }
}

// å€™é€‰åŒºçš„ç”¨æˆ·å¯èƒ½è¦è¿›å…¥å¾—å¥–åŒº
// time: å½“å‰æ—¶é—´ç‚¹
function move(cands, daddy, k, time) {
  if (cands.length === 0) {
    return;
  }
  // å€™é€‰åŒºæœ‰ç”¨æˆ·
  if (daddy.length < k) {
    // å¾—å¥–åŒºæ²¡æ»¡
    // æŠŠå€™é€‰åŒºçš„ç¬¬0ä¸ªç”¨æˆ·æ‹¿å‡ºæ¥ï¼Œæ”¾åˆ°å¾—å¥–åŒºé‡Œå»
    const c = cands[0];
    // æ›´æ–°è¿›å…¥æ—¶é—´
    c.enterTime = time;
    // åŠ å…¥å¾—å¥–åŒº
    daddy.push(c);
    // ä»å€™é€‰åŒºç§»èµ°å¤´
    cands.shift();
  } else {
    // å¾—å¥–åŒºæ»¡äº†
    // åªæœ‰`å€™é€‰åŒºçš„æœ€å¤§å€¼`PKèµ¢äº†`å¾—å¥–åŒºçš„æœ€å°å€¼`æ‰èƒ½æŠŠ`å€™é€‰åŒºçš„ç”¨æˆ·`æ›¿æ¢åˆ°`å¾—å¥–åŒº`
    if (cands[0].buy > daddy[0].buy) {
      const oldDaddy = daddy[0];
      daddy.shift();
      const newDaddy = cands[0];
      cands.shift();
      newDaddy.enterTime = time;
      oldDaddy.enterTime = time;
      daddy.push(newDaddy);
      cands.push(oldDaddy);
    }
  }
}

// å€™é€‰åŒºæ’åºè§„åˆ™: è´­ä¹°æ•°å¤§çš„æ’å‰é¢ï¼Œå¦‚æœè´­ä¹°æ•°ä¸€æ ·ï¼Œè°æ—©è°æ”¾å‰é¢
function compareCands(c1, c2) {
  return c1.buy !== c2.buy ? c2.buy - c1.buy : c1.enterTime - c2.enterTime;
}

// å¾—å¥–åŒºæ’åºè§„åˆ™: è´­ä¹°æ•°å°çš„æ’å‰é¢ï¼Œå¦‚æœè´­ä¹°æ•°ä¸€æ ·ï¼Œè°æ—©è°æ”¾å‰é¢
// æ¯æ¬¡éƒ½çœ‹çœ‹: `å€™é€‰åŒº0ä½ç½®`(è´­ä¹°æ•°æœ€å¤§)èƒ½å¦æŠŠ`å¾—å¥–åŒº0ä½ç½®`(è´­ä¹°æ•°æœ€å°)å¹²æ‰
function compareDaddy(c1, c2) {
  return c1.buy !== c2.buy ? c1.buy - c2.buy : c1.enterTime - c2.enterTime;
}
